# Claims Processing System - Environment Configuration Template
# Copy this file to .env in the project root and configure values
#
# Usage:
#   Windows: copy deployment\.env.template .env
#   Linux/Mac: cp deployment/.env.template .env

# =============================================================================
# Application Settings
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
TZ=UTC

# Application Secrets (CHANGE THESE IN PRODUCTION - min 32 characters each)
SECRET_KEY=CHANGE-THIS-claims-secret-key-min-32-chars
JWT_SECRET_KEY=CHANGE-THIS-jwt-secret-key-min-32-chars
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# Database Configuration
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=claims
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_DB=0
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# =============================================================================
# MinIO Configuration (S3-compatible storage)
# =============================================================================
MINIO_ENDPOINT=localhost:9002
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_SECURE=false
MINIO_REGION=us-east-1
MINIO_BUCKET_UPLOADS=uploads
MINIO_BUCKET_ASSETS=assets
MINIO_BUCKET_BACKUPS=backups

# =============================================================================
# FastAPI Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8002
API_WORKERS=4
API_RELOAD=true
CORS_ORIGINS=["http://localhost:4200","http://localhost:4201","http://localhost:4202","http://localhost:8501","http://localhost:8502","http://localhost:3000"]
CORS_CREDENTIALS=true
CORS_METHODS=["*"]
CORS_HEADERS=["*"]

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# File Upload
# =============================================================================
UPLOAD_MAX_SIZE_MB=100
UPLOAD_ALLOWED_EXTENSIONS=[".pdf",".txt",".csv",".json",".png",".jpg",".jpeg"]

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_RATE_LIMITING=true
FEATURE_OAUTH2=false
FEATURE_MCP=true
FEATURE_CELERY_TASKS=true

# =============================================================================
# Claims Processing Settings (prefix: CLAIMS_)
# =============================================================================

# Integration Mode: demo (local DB) or live (external systems)
CLAIMS_INTEGRATION_MODE=demo

# =============================================================================
# LLM Provider Configuration
# Choose ONE as primary provider
# =============================================================================

CLAIMS_LLM_PRIMARY_PROVIDER=openai
CLAIMS_LLM_FALLBACK_PROVIDER=ollama
CLAIMS_LLM_FALLBACK_ON_ERROR=true
CLAIMS_LLM_CONFIDENCE_THRESHOLD=0.85
CLAIMS_LLM_TIMEOUT_SECONDS=300

# -----------------------------------------------------------------------------
# Option A: OpenAI (Cloud) - Recommended for production
# Get API key: https://platform.openai.com/api-keys
# -----------------------------------------------------------------------------
CLAIMS_OPENAI_API_KEY=sk-your-openai-api-key-here
CLAIMS_OPENAI_MODEL=gpt-4o

# -----------------------------------------------------------------------------
# Option B: Ollama (Local) - Free, requires Docker
# Install: docker compose -f docker-compose.local.yml up -d ollama
# Pull model: docker exec claims-ollama ollama pull llama3.2
# -----------------------------------------------------------------------------
CLAIMS_OLLAMA_BASE_URL=http://localhost:11434
CLAIMS_OLLAMA_MODEL=llama3.2
CLAIMS_OLLAMA_MEDICAL_MODEL=llama3.2

# -----------------------------------------------------------------------------
# Option C: Anthropic (Cloud) - Alternative
# Get API key: https://console.anthropic.com/
# -----------------------------------------------------------------------------
CLAIMS_ANTHROPIC_API_KEY=

# =============================================================================
# OCR Provider Configuration
# =============================================================================

CLAIMS_OCR_PRIMARY_PROVIDER=paddleocr
CLAIMS_OCR_FALLBACK_PROVIDER=tesseract
CLAIMS_OCR_FALLBACK_ON_ERROR=true
CLAIMS_OCR_CONFIDENCE_THRESHOLD=0.90
CLAIMS_OCR_TIMEOUT_SECONDS=30

# PaddleOCR (via Docker container)
# Install: docker compose -f docker-compose.local.yml up -d paddleocr
CLAIMS_PADDLEOCR_HTTP_URL=http://localhost:9091
CLAIMS_PADDLEOCR_LANGUAGES=en,ar
CLAIMS_PADDLEOCR_USE_GPU=false

# Azure Document Intelligence (Cloud OCR - Alternative)
# Get credentials: https://portal.azure.com
CLAIMS_AZURE_DI_ENDPOINT=
CLAIMS_AZURE_DI_KEY=

# =============================================================================
# Medical NLP Configuration
# =============================================================================
CLAIMS_MEDICAL_NLP_PRIMARY_PROVIDER=medcat
CLAIMS_MEDICAL_NLP_FALLBACK_PROVIDER=medspacy
CLAIMS_MEDICAL_NLP_FALLBACK_ON_ERROR=true

# =============================================================================
# Embedding Configuration (for semantic search)
# =============================================================================
EMBEDDING_PROVIDER=ollama
EMBEDDING_API_KEY=not-required-for-ollama
EMBEDDING_BASE_URL=http://localhost:11434/v1
EMBEDDING_MODEL=nomic-embed-text
EMBEDDING_DIMENSIONS=768

# =============================================================================
# Monitoring (Optional)
# =============================================================================
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin

# =============================================================================
# Streamlit Dashboard (Optional)
# =============================================================================
STREAMLIT_PORT=8502
STREAMLIT_THEME=light
STREAMLIT_SERVER_HEADLESS=true

# =============================================================================
# MCP Configuration (Optional)
# =============================================================================
MCP_ENABLED=true
MCP_SERVER_NAME=claims-mcp-server
MCP_SERVER_VERSION=1.0.0
