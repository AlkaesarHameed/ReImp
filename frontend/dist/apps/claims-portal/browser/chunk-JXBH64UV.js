import{a as si,b as ci}from"./chunk-RG6UHLVT.js";import{a as gi,b as vi,c as Xe}from"./chunk-LR7J46YX.js";import{a as Si,b as bi}from"./chunk-NW2C26PC.js";import{a as Ci,b as Je}from"./chunk-E5G7LYX2.js";import{a as yt,c as _i,d as fi,f as hi,g as xi,k as yi}from"./chunk-PK23XMUB.js";import"./chunk-AUFHY7VS.js";import"./chunk-XPWDESDQ.js";import"./chunk-ER3XKTCP.js";import"./chunk-JA2DIW7E.js";import{a as ye,b as Se}from"./chunk-ZMZXLXSM.js";import"./chunk-L7CYZS6T.js";import{a as Ke,b as Ce}from"./chunk-SGA43OA7.js";import{a as pi,b as di}from"./chunk-VBPYTXU6.js";import{a as mi,b as ui}from"./chunk-C73BGL6H.js";import{a as xe,b as ae}from"./chunk-OUDOF7NV.js";import{a as ge,b as ve}from"./chunk-JTFR2SS7.js";import{a as ei,b as ti}from"./chunk-RANQPQCM.js";import{a as _e,b as K}from"./chunk-EQ7FBPX2.js";import{a as _t,b as ft}from"./chunk-ZURLY7IA.js";import{a as gt}from"./chunk-E5KJRRTP.js";import{a as ut}from"./chunk-XKZBSERL.js";import{a as fe}from"./chunk-ZCMJ7UQL.js";import"./chunk-GGQ7LRWG.js";import{d as q,e as ni,f as j}from"./chunk-QJZJPKUU.js";import{a as Ye,b as Ge}from"./chunk-2UYTTCDL.js";import{a as Qe,c as ii}from"./chunk-SILQIBBA.js";import{b as Xt,e as mt,i as Pe,k as We,n as Z,o as pe,p as ne}from"./chunk-CMI2WP65.js";import{c as Kt,d as ct,f as pt,h as dt}from"./chunk-F2X3VGZZ.js";import{a as oi}from"./chunk-XJSWGE6B.js";import{b as Jt,e as de,g as me,p as ue}from"./chunk-COAKLJSO.js";import{a as li}from"./chunk-C7COBHZM.js";import{A as ht,B as ri,C as he,D as oe,E as Ct,F as xt,b as ai,s as vt,z as Ze}from"./chunk-Y2YSYY3G.js";import{a as He}from"./chunk-QB55GBCV.js";import{b as Gt,d as Zt}from"./chunk-TD2OOY6M.js";import{d as G,e as ce,j as Yt}from"./chunk-R72WXHZK.js";import{a as Wt,j as $e,k as Ae,l as Ne,m as je,n as qe,q as Ht,t as Qt,u as N,x as st}from"./chunk-2QNP6Q64.js";import{$a as Lt,$b as $t,Ab as I,Ac as V,B as Pt,Bb as r,Ca as Ut,Cb as a,D as nt,Db as _,Eb as R,Fb as z,Gb as J,Hb as b,Kb as v,Lb as c,O as Et,Ob as Ve,Pb as Ue,Q as Ft,Qb as ee,Rb as te,S as It,Sb as Te,T as ot,Ta as at,Tb as d,U as Dt,Ua as Bt,Ub as h,Vb as $,Wb as ie,Xa as o,Yb as W,Z as Ie,Zb as H,_ as De,_b as Q,ab as U,ac as rt,bc as At,cc as Be,da as O,ec as Nt,fb as B,fc as jt,g as re,gb as Oe,ic as qt,jb as Rt,ka as f,kb as m,kc as se,la as g,lc as lt,m as be,ma as kt,mc as Le,na as Ot,oc as Me,q as we,r as it,rb as y,sb as p,ta as P,tb as zt,tc as Re,ua as Vt,ub as Y,wb as L,xa as ke,xb as x,xc as A,y as Fe,ya as E,yb as le,yc as ze,zb as F}from"./chunk-UUFN4DK2.js";import{a as w,b as M,d as Ee}from"./chunk-4CLCTAJ7.js";var St=(()=>{class t extends ii{pathId;ngOnInit(){this.pathId="url(#"+Xt()+")"}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Ot(t)))(n||t)}})();static \u0275cmp=B({type:t,selectors:[["UploadIcon"]],features:[Rt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,n){i&1&&(kt(),r(0,"svg",0)(1,"g"),_(2,"path",1),a(),r(3,"defs")(4,"clipPath",2),_(5,"rect",3),a()()()),i&2&&(L(n.getClassNames()),y("aria-label",n.ariaLabel)("aria-hidden",n.ariaHidden)("role",n.role),o(),y("clip-path",n.pathId),o(3),p("id",n.pathId))},encapsulation:2})}return t})();var qi=(t,l)=>({showTransitionParams:t,hideTransitionParams:l}),Wi=t=>({value:"visible",params:t});function Hi(t,l){if(t&1&&_(0,"span"),t&2){let e=c().$implicit;L("p-message-icon pi "+e.icon),y("data-pc-section","icon")}}function Qi(t,l){t&1&&_(0,"CheckIcon"),t&2&&y("data-pc-section","icon")}function Yi(t,l){t&1&&_(0,"InfoCircleIcon"),t&2&&y("data-pc-section","icon")}function Gi(t,l){t&1&&_(0,"TimesCircleIcon"),t&2&&y("data-pc-section","icon")}function Zi(t,l){t&1&&_(0,"ExclamationTriangleIcon"),t&2&&y("data-pc-section","icon")}function Ki(t,l){if(t&1&&(r(0,"span",10),R(1),m(2,Qi,1,1,"CheckIcon",11)(3,Yi,1,1,"InfoCircleIcon",11)(4,Gi,1,1,"TimesCircleIcon",11)(5,Zi,1,1,"ExclamationTriangleIcon",11),z(),a()),t&2){let e=c().$implicit;o(2),p("ngIf",e.severity==="success"),o(),p("ngIf",e.severity==="info"),o(),p("ngIf",e.severity==="error"),o(),p("ngIf",e.severity==="warn")}}function Xi(t,l){if(t&1&&_(0,"span",14),t&2){let e=c(2).$implicit;p("innerHTML",e.summary,at),y("data-pc-section","summary")}}function Ji(t,l){if(t&1&&_(0,"span",15),t&2){let e=c(2).$implicit;p("innerHTML",e.detail,at),y("data-pc-section","detail")}}function en(t,l){if(t&1&&(R(0),m(1,Xi,1,2,"span",12)(2,Ji,1,2,"span",13),z()),t&2){let e=c().$implicit;o(),p("ngIf",e.summary),o(),p("ngIf",e.detail)}}function tn(t,l){if(t&1&&(r(0,"span",18),d(1),a()),t&2){let e=c(2).$implicit;y("data-pc-section","summary"),o(),h(e.summary)}}function nn(t,l){if(t&1&&(r(0,"span",19),d(1),a()),t&2){let e=c(2).$implicit;y("data-pc-section","detail"),o(),h(e.detail)}}function on(t,l){if(t&1&&m(0,tn,2,2,"span",16)(1,nn,2,2,"span",17),t&2){let e=c().$implicit;p("ngIf",e.summary),o(),p("ngIf",e.detail)}}function an(t,l){if(t&1){let e=b();r(0,"button",20),v("click",function(){f(e);let n=c().index,s=c(2);return g(s.removeMessage(n))}),_(1,"TimesIcon",21),a()}if(t&2){let e=c(3);y("aria-label",e.closeAriaLabel)("data-pc-section","closebutton"),o(),p("styleClass","p-message-close-icon"),y("data-pc-section","closeicon")}}function rn(t,l){if(t&1&&(r(0,"div",5)(1,"div",6),m(2,Hi,1,3,"span",7)(3,Ki,6,4,"span",8)(4,en,3,2,"ng-container",3)(5,on,2,2,"ng-template",null,1,Me)(7,an,2,4,"button",9),a()()),t&2){let e,i=l.$implicit,n=Te(6),s=c(2);L("p-message p-message-"+i.severity),p("@messageAnimation",At(13,Wi,Be(10,qi,s.showTransitionOptions,s.hideTransitionOptions))),o(),y("data-pc-section","wrapper")("id",i.id||null),o(),p("ngIf",i.icon),o(),p("ngIf",!i.icon),o(),p("ngIf",!s.escape)("ngIfElse",n),o(3),p("ngIf",s.closable&&((e=i.closable)!==null&&e!==void 0?e:!0))}}function ln(t,l){if(t&1&&(R(0),m(1,rn,8,15,"div",4),z()),t&2){let e=c();o(),p("ngForOf",e.messages)}}function sn(t,l){t&1&&J(0)}function cn(t,l){if(t&1&&(r(0,"div",22)(1,"div",6),m(2,sn,1,0,"ng-container",23),a()()),t&2){let e=c();p("ngClass","p-message p-message-"+e.severity),o(2),p("ngTemplateOutlet",e.contentTemplate)}}var Ti=(()=>{class t{messageService;el;cd;config;set value(e){this.messages=e,this.startMessageLifes(this.messages)}closable=!0;style;styleClass;enableService=!0;key;escape=!0;severity;showTransitionOptions="300ms ease-out";hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)";valueChange=new P;onClose=new P;templates;messages;messageSubscription;clearSubscription;timerSubscriptions=[];contentTemplate;constructor(e,i,n,s){this.messageService=e,this.el=i,this.cd=n,this.config=s}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template;break}}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){Array.isArray(e)||(e=[e]);let i=e.filter(n=>this.key===n.key);this.messages=this.messages?[...this.messages,...i]:[...i],this.startMessageLifes(i),this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return e&&e.offsetParent?this.contentTemplate!=null||this.messages&&this.messages.length>0:!1}clear(){this.messages=[],this.valueChange.emit(this.messages)}removeMessage(e){let i=this.messages[e];this.messages=this.messages?.filter((n,s)=>s!==e),i&&this.onClose.emit(i),this.valueChange.emit(this.messages)}get icon(){let e=this.severity||(this.hasMessages()?this.messages[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle";default:return"pi-info-circle"}return null}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.timerSubscriptions?.forEach(e=>e.unsubscribe())}startMessageLifes(e){e?.forEach(i=>i.life&&this.startMessageLife(i))}startMessageLife(e){let i=Fe(e.life).subscribe(()=>{this.messages=this.messages?.filter(n=>n!==e),this.timerSubscriptions=this.timerSubscriptions?.filter(n=>n!==i),this.valueChange.emit(this.messages),this.cd.markForCheck()});this.timerSubscriptions.push(i)}static \u0275fac=function(i){return new(i||t)(U(Pe,8),U(ke),U(Re),U(We))};static \u0275cmp=B({type:t,selectors:[["p-messages"]],contentQueries:function(i,n,s){if(i&1&&Ve(s,Z,4),i&2){let u;ee(u=te())&&(n.templates=u)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:[2,"closable","closable",A],style:"style",styleClass:"styleClass",enableService:[2,"enableService","enableService",A],key:"key",escape:[2,"escape","escape",A],severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange",onClose:"onClose"},standalone:!1,decls:4,vars:8,consts:[["staticMessage",""],["escapeOut",""],["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"class",4,"ngIf"],["class","p-message-icon",4,"ngIf"],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-message-icon"],[4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[3,"styleClass"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(i,n){if(i&1&&(r(0,"div",2),m(1,ln,2,1,"ng-container",3)(2,cn,3,2,"ng-template",null,0,Me),a()),i&2){let s=Te(3);L(n.styleClass),p("ngStyle",n.style),y("aria-atomic",!0)("aria-live","assertive")("data-pc-name","message"),o(),p("ngIf",!n.contentTemplate)("ngIfElse",s)}},dependencies:()=>[$e,Ae,Ne,qe,je,Ye,ut,ft,gt,_t,fe],styles:[`@layer primeng{.p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center;flex:none}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}}
`],encapsulation:2,data:{animation:[Kt("messageAnimation",[dt(":enter",[pt({opacity:0,transform:"translateY(-25%)"}),ct("{{showTransitionParams}}")]),dt(":leave",[ct("{{hideTransitionParams}}",pt({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0})}return t})(),wt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Oe({type:t});static \u0275inj=De({imports:[N,Ge,ut,ft,gt,_t,fe,pe,pe]})}return t})();var dn=["advancedfileinput"],mn=["basicfileinput"],un=["content"],_n=(t,l,e,i,n)=>({$implicit:t,uploadedFiles:l,chooseCallback:e,clearCallback:i,uploadCallback:n}),fn=(t,l,e,i,n,s,u,S)=>({$implicit:t,uploadedFiles:l,chooseCallback:e,clearCallback:i,removeUploadedFileCallback:n,removeFileCallback:s,progress:u,messages:S}),gn=(t,l)=>({"p-focus":t,"p-disabled":l}),vn=(t,l,e,i)=>({"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":t,"p-fileupload-choose-selected":l,"p-focus":e,"p-disabled":i});function hn(t,l){if(t&1&&_(0,"span",21),t&2){let e=c(3);L(e.chooseIcon),p("ngClass","p-button-icon p-button-icon-left"),y("aria-label",!0)("data-pc-section","chooseicon")}}function Cn(t,l){t&1&&_(0,"PlusIcon",24),t&2&&(p("styleClass","p-button-icon p-button-icon-left"),y("aria-label",!0)("data-pc-section","chooseicon"))}function xn(t,l){}function yn(t,l){t&1&&m(0,xn,0,0,"ng-template")}function Sn(t,l){if(t&1&&(r(0,"span",25),m(1,yn,1,0,null,11),a()),t&2){let e=c(4);y("aria-label",!0)("data-pc-section","chooseicon"),o(),p("ngTemplateOutlet",e.chooseIconTemplate)}}function bn(t,l){if(t&1&&(R(0),m(1,Cn,1,3,"PlusIcon",22)(2,Sn,2,3,"span",23),z()),t&2){let e=c(3);o(),p("ngIf",!e.chooseIconTemplate),o(),p("ngIf",e.chooseIconTemplate)}}function wn(t,l){if(t&1&&_(0,"span",28),t&2){let e=c(4);p("ngClass",e.uploadIcon),y("aria-hidden",!0)}}function Tn(t,l){t&1&&_(0,"UploadIcon",24),t&2&&p("styleClass","p-button-icon p-button-icon-left")}function Mn(t,l){}function Pn(t,l){t&1&&m(0,Mn,0,0,"ng-template")}function En(t,l){if(t&1&&(r(0,"span",25),m(1,Pn,1,0,null,11),a()),t&2){let e=c(5);y("aria-hidden",!0),o(),p("ngTemplateOutlet",e.uploadIconTemplate)}}function Fn(t,l){if(t&1&&(R(0),m(1,Tn,1,1,"UploadIcon",22)(2,En,2,2,"span",23),z()),t&2){let e=c(4);o(),p("ngIf",!e.uploadIconTemplate),o(),p("ngIf",e.uploadIconTemplate)}}function In(t,l){if(t&1){let e=b();r(0,"p-button",26),v("onClick",function(){f(e);let n=c(3);return g(n.upload())}),m(1,wn,1,2,"span",27)(2,Fn,3,2,"ng-container",9),a()}if(t&2){let e=c(3);p("label",e.uploadButtonLabel)("disabled",!e.hasFiles()||e.isFileLimitExceeded())("styleClass",e.uploadStyleClass),o(),p("ngIf",e.uploadIcon),o(),p("ngIf",!e.uploadIcon)}}function Dn(t,l){if(t&1&&_(0,"span",28),t&2){let e=c(4);p("ngClass",e.cancelIcon)}}function kn(t,l){t&1&&_(0,"TimesIcon",24),t&2&&(p("styleClass","p-button-icon p-button-icon-left"),y("aria-hidden",!0))}function On(t,l){}function Vn(t,l){t&1&&m(0,On,0,0,"ng-template")}function Un(t,l){if(t&1&&(r(0,"span",25),m(1,Vn,1,0,null,11),a()),t&2){let e=c(5);y("aria-hidden",!0),o(),p("ngTemplateOutlet",e.cancelIconTemplate)}}function Bn(t,l){if(t&1&&(R(0),m(1,kn,1,2,"TimesIcon",22)(2,Un,2,2,"span",23),z()),t&2){let e=c(4);o(),p("ngIf",!e.cancelIconTemplate),o(),p("ngIf",e.cancelIconTemplate)}}function Ln(t,l){if(t&1){let e=b();r(0,"p-button",26),v("onClick",function(){f(e);let n=c(3);return g(n.clear())}),m(1,Dn,1,1,"span",27)(2,Bn,3,2,"ng-container",9),a()}if(t&2){let e=c(3);p("label",e.cancelButtonLabel)("disabled",!e.hasFiles()||e.uploading)("styleClass",e.cancelStyleClass),o(),p("ngIf",e.cancelIcon),o(),p("ngIf",!e.cancelIcon)}}function Rn(t,l){if(t&1){let e=b();R(0),r(1,"span",17),v("focus",function(){f(e);let n=c(2);return g(n.onFocus())})("blur",function(){f(e);let n=c(2);return g(n.onBlur())})("click",function(){f(e);let n=c(2);return g(n.choose())})("keydown.enter",function(){f(e);let n=c(2);return g(n.choose())}),r(2,"input",7,0),v("change",function(n){f(e);let s=c(2);return g(s.onFileSelect(n))}),a(),m(4,hn,1,5,"span",18)(5,bn,3,2,"ng-container",9),r(6,"span",19),d(7),a()(),m(8,In,3,5,"p-button",20)(9,Ln,3,5,"p-button",20),z()}if(t&2){let e=c(2);o(),L(e.chooseStyleClass),p("ngClass",Be(16,gn,e.focus,e.disabled||e.isChooseDisabled())),y("data-pc-section","choosebutton"),o(),p("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),y("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),o(2),p("ngIf",e.chooseIcon),o(),p("ngIf",!e.chooseIcon),o(),y("data-pc-section","choosebuttonlabel"),o(),h(e.chooseButtonLabel),o(),p("ngIf",!e.auto&&e.showUploadButton),o(),p("ngIf",!e.auto&&e.showCancelButton)}}function zn(t,l){t&1&&J(0)}function $n(t,l){t&1&&J(0)}function An(t,l){if(t&1&&_(0,"p-progressBar",29),t&2){let e=c(2);p("value",e.progress)("showValue",!1)}}function Nn(t,l){if(t&1){let e=b();r(0,"div")(1,"img",35),v("error",function(n){f(e);let s=c(5);return g(s.imageError(n))}),a()()}if(t&2){let e=c().$implicit,i=c(4);o(),p("src",e.objectURL,Bt)("width",i.previewWidth)}}function jn(t,l){t&1&&_(0,"TimesIcon")}function qn(t,l){}function Wn(t,l){t&1&&m(0,qn,0,0,"ng-template")}function Hn(t,l){if(t&1){let e=b();r(0,"div",32),m(1,Nn,2,2,"div",9),r(2,"div",33),d(3),a(),r(4,"div"),d(5),a(),r(6,"div")(7,"button",34),v("click",function(n){let s=f(e).index,u=c(4);return g(u.remove(n,s))}),m(8,jn,1,0,"TimesIcon",9)(9,Wn,1,0,null,11),a()()()}if(t&2){let e=l.$implicit,i=c(4);o(),p("ngIf",i.isImage(e)),o(2),h(e.name),o(2),h(i.formatSize(e.size)),o(2),L(i.removeStyleClass),p("disabled",i.uploading),o(),p("ngIf",!i.cancelIconTemplate),o(),p("ngTemplateOutlet",i.cancelIconTemplate)}}function Qn(t,l){if(t&1&&(r(0,"div"),m(1,Hn,10,8,"div",31),a()),t&2){let e=c(3);o(),p("ngForOf",e.files)}}function Yn(t,l){}function Gn(t,l){if(t&1&&(r(0,"div"),m(1,Yn,0,0,"ng-template",36),a()),t&2){let e=c(3);o(),p("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function Zn(t,l){if(t&1&&(r(0,"div",30),m(1,Qn,2,1,"div",9)(2,Gn,2,2,"div",9),a()),t&2){let e=c(2);o(),p("ngIf",!e.fileTemplate),o(),p("ngIf",e.fileTemplate)}}function Kn(t,l){t&1&&J(0)}function Xn(t,l){t&1&&J(0)}function Jn(t,l){if(t&1&&(r(0,"div",37),m(1,Xn,1,0,"ng-container",11),a()),t&2){let e=c(2);o(),p("ngTemplateOutlet",e.emptyTemplate)}}function eo(t,l){if(t&1){let e=b();r(0,"div",6)(1,"input",7,0),v("change",function(n){f(e);let s=c();return g(s.onFileSelect(n))}),a(),r(3,"div",8),m(4,Rn,10,19,"ng-container",9)(5,zn,1,0,"ng-container",10)(6,$n,1,0,"ng-container",11),a(),r(7,"div",12,1),v("dragenter",function(n){f(e);let s=c();return g(s.onDragEnter(n))})("dragleave",function(n){f(e);let s=c();return g(s.onDragLeave(n))})("drop",function(n){f(e);let s=c();return g(s.onDrop(n))}),m(9,An,1,2,"p-progressBar",13),_(10,"p-messages",14),m(11,Zn,3,2,"div",15)(12,Kn,1,0,"ng-container",10)(13,Jn,2,1,"div",16),a()()}if(t&2){let e=c();L(e.styleClass),p("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),y("data-pc-name","fileupload")("data-pc-section","root"),o(),zt("display","none"),p("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),y("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),o(2),y("data-pc-section","buttonbar"),o(),p("ngIf",!e.headerTemplate),o(),p("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",jt(27,_n,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.upload.bind(e))),o(),p("ngTemplateOutlet",e.toolbarTemplate),o(),y("data-pc-section","content"),o(2),p("ngIf",e.hasFiles()),o(),p("value",e.msgs)("enableService",!1),o(),p("ngIf",e.hasFiles()),o(),p("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",qt(33,fn,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.removeUploadedFile.bind(e),e.remove.bind(e),e.progress,e.msgs)),o(),p("ngIf",e.emptyTemplate&&!e.hasFiles()&&!e.hasUploadedFiles())}}function to(t,l){if(t&1&&_(0,"span",28),t&2){let e=c(3);p("ngClass",e.uploadIcon)}}function io(t,l){t&1&&_(0,"UploadIcon",24),t&2&&p("styleClass","p-button-icon p-button-icon-left")}function no(t,l){}function oo(t,l){t&1&&m(0,no,0,0,"ng-template")}function ao(t,l){if(t&1&&(r(0,"span",25),m(1,oo,1,0,null,11),a()),t&2){let e=c(4);o(),p("ngTemplateOutlet",e.uploadIconTemplate)}}function ro(t,l){if(t&1&&(R(0),m(1,io,1,1,"UploadIcon",22)(2,ao,2,1,"span",23),z()),t&2){let e=c(3);o(),p("ngIf",!e.uploadIconTemplate),o(),p("ngIf",e.uploadIconTemplate)}}function lo(t,l){if(t&1&&(R(0),m(1,to,1,1,"span",27)(2,ro,3,2,"ng-container",9),z()),t&2){let e=c(2);o(),p("ngIf",e.uploadIcon),o(),p("ngIf",!e.uploadIcon)}}function so(t,l){if(t&1&&_(0,"span",44),t&2){let e=c(3);p("ngClass",e.chooseIcon)}}function co(t,l){t&1&&_(0,"PlusIcon",24),t&2&&(p("styleClass","p-button-icon p-button-icon-left pi"),y("aria-hidden",!0)("data-pc-section","uploadicon"))}function po(t,l){}function mo(t,l){t&1&&m(0,po,0,0,"ng-template")}function uo(t,l){if(t&1&&(r(0,"span",46),m(1,mo,1,0,null,11),a()),t&2){let e=c(4);y("aria-hidden",!0)("data-pc-section","uploadicon"),o(),p("ngTemplateOutlet",e.chooseIconTemplate)}}function _o(t,l){if(t&1&&(R(0),m(1,co,1,3,"PlusIcon",22)(2,uo,2,3,"span",45),z()),t&2){let e=c(3);o(),p("ngIf",!e.chooseIconTemplate),o(),p("ngIf",e.chooseIconTemplate)}}function fo(t,l){if(t&1&&m(0,so,1,1,"span",43)(1,_o,3,2,"ng-container",9),t&2){let e=c(2);p("ngIf",e.chooseIcon),o(),p("ngIf",!e.chooseIcon)}}function go(t,l){if(t&1&&(r(0,"span",19),d(1),a()),t&2){let e=c(2);y("data-pc-section","label"),o(),h(e.basicButtonLabel)}}function vo(t,l){if(t&1){let e=b();r(0,"input",47,3),v("change",function(n){f(e);let s=c(2);return g(s.onFileSelect(n))})("focus",function(){f(e);let n=c(2);return g(n.onFocus())})("blur",function(){f(e);let n=c(2);return g(n.onBlur())}),a()}if(t&2){let e=c(2);p("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled),y("aria-label",e.browseFilesLabel)("data-pc-section","input")}}function ho(t,l){if(t&1){let e=b();r(0,"div",38),_(1,"p-messages",14),r(2,"span",39),v("click",function(){f(e);let n=c();return g(n.onBasicUploaderClick())})("keydown",function(n){f(e);let s=c();return g(s.onBasicKeydown(n))}),m(3,lo,3,2,"ng-container",40)(4,fo,2,2,"ng-template",null,2,Me)(6,go,2,2,"span",41)(7,vo,2,5,"input",42),a()()}if(t&2){let e=Te(5),i=c();y("data-pc-name","fileupload"),o(),p("value",i.msgs)("enableService",!1),o(),L(i.styleClass),p("ngClass",Nt(12,vn,!i.basicButtonLabel,i.hasFiles(),i.focus,i.disabled))("ngStyle",i.style),y("data-pc-section","choosebutton"),o(),p("ngIf",i.hasFiles()&&!i.auto)("ngIfElse",e),o(3),p("ngIf",i.basicButtonLabel),o(),p("ngIf",!i.hasFiles())}}var Pi=(()=>{class t{document;platformId;renderer;el;sanitizer;zone;http;cd;config;name;url;method="post";multiple;accept;disabled;auto;withCredentials;maxFileSize;invalidFileSizeMessageSummary="{0}: Invalid file size, ";invalidFileSizeMessageDetail="maximum upload size is {0}.";invalidFileTypeMessageSummary="{0}: Invalid file type, ";invalidFileTypeMessageDetail="allowed file types: {0}.";invalidFileLimitMessageDetail="limit is {0} at most.";invalidFileLimitMessageSummary="Maximum number of files exceeded, ";style;styleClass;previewWidth=50;chooseLabel;uploadLabel;cancelLabel;chooseIcon;uploadIcon;cancelIcon;showUploadButton=!0;showCancelButton=!0;mode="advanced";headers;customUpload;fileLimit;uploadStyleClass;cancelStyleClass;removeStyleClass;chooseStyleClass;onBeforeUpload=new P;onSend=new P;onUpload=new P;onError=new P;onClear=new P;onRemove=new P;onSelect=new P;onProgress=new P;uploadHandler=new P;onImageError=new P;onRemoveUploadedFile=new P;templates;advancedFileInput;basicFileInput;content;set files(e){this._files=[];for(let i=0;i<e.length;i++){let n=e[i];this.validate(n)&&(this.isImage(n)&&(n.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[i]))),this._files.push(e[i]))}}get files(){return this._files}get basicButtonLabel(){return this.auto||!this.hasFiles()?this.chooseLabel:this.uploadLabel??this.files[0].name}_files=[];progress=0;dragHighlight;msgs;fileTemplate;headerTemplate;contentTemplate;toolbarTemplate;chooseIconTemplate;uploadIconTemplate;cancelIconTemplate;emptyTemplate;uploadedFileCount=0;focus;uploading;duplicateIEEvent;translationSubscription;dragOverListener;uploadedFiles=[];fileUploadSubcription;constructor(e,i,n,s,u,S,C,T,k){this.document=e,this.platformId=i,this.renderer=n,this.el=s,this.sanitizer=u,this.zone=S,this.http=C,this.cd=T,this.config=k}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"file":this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template;break;case"chooseicon":this.chooseIconTemplate=e.template;break;case"uploadicon":this.uploadIconTemplate=e.template;break;case"cancelicon":this.cancelIconTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;default:this.fileTemplate=e.template;break}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){st(this.platformId)&&this.mode==="advanced"&&this.zone.runOutsideAngular(()=>{this.content&&(this.dragOverListener=this.renderer.listen(this.content.nativeElement,"dragover",this.onDragOver.bind(this)))})}getTranslation(e){return this.config.getTranslation(e)}choose(){this.advancedFileInput?.nativeElement.click()}onFileSelect(e){if(e.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.msgs=[],this.multiple||(this.files=[]);let i=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let n=0;n<i.length;n++){let s=i[n];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(i[n]))),this.files.push(i[n]))}this.onSelect.emit({originalEvent:e,files:i,currentFiles:this.files}),this.checkFileLimit(i),this.hasFiles()&&this.auto&&(this.mode!=="advanced"||!this.isFileLimitExceeded())&&this.upload(),e.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let i of this.files)if(i.name+i.type+i.size===e.name+e.type+e.size)return!0;return!1}isIE11(){if(st(this.platformId))return!!this.document.defaultView.MSInputMethodContext&&!!this.document.documentMode}validate(e){return this.msgs=this.msgs||[],this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):this.maxFileSize&&e.size>this.maxFileSize?(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),!1):!0}isFileTypeValid(e){let i=this.accept?.split(",").map(n=>n.trim());for(let n of i)if(this.isWildcard(n)?this.getTypeClass(e.type)===this.getTypeClass(n):e.type==n||this.getFileExtension(e).toLowerCase()===n.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return e.indexOf("*")!==-1}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let i=0;i<this.files.length;i++)e.append(this.name,this.files[i],this.files[i].name);this.cancelUploadRequest(),this.fileUploadSubcription=this.http.request(this.method,this.url,{body:e,headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(i=>{switch(i.type){case G.Sent:this.onSend.emit({originalEvent:i,formData:e});break;case G.Response:this.uploading=!1,this.progress=0,i.status>=200&&i.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:i,files:this.files})):this.onError.emit({files:this.files}),this.uploadedFiles.push(...this.files),this.clear();break;case G.UploadProgress:{i.loaded&&(this.progress=Math.round(i.loaded*100/i.total)),this.onProgress.emit({originalEvent:i,progress:this.progress});break}}this.cd.markForCheck()},i=>{this.uploading=!1,this.onError.emit({files:this.files,error:i})})}}clear(){this.files=[],this.uploadedFileCount=0,this.cancelUploadRequest(),this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,i){this.cancelUploadRequest(),this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[i]}),this.files.splice(i,1),this.checkFileLimit(this.files)}removeUploadedFile(e){let i=this.uploadedFiles.splice(e,1)[0];this.uploadedFiles=[...this.uploadedFiles],this.onRemoveUploadedFile.emit({file:i,files:this.uploadedFiles})}cancelUploadRequest(){this.fileUploadSubcription&&(this.fileUploadSubcription.unsubscribe(),this.fileUploadSubcription=void 0)}isFileLimitExceeded(){let i=this.auto?this.files.length:this.files.length+this.uploadedFileCount;return this.fileLimit&&this.fileLimit<=i&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<i}isChooseDisabled(){return this.auto?this.fileLimit&&this.fileLimit<=this.files.length:this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(e){this.msgs??=[];let i=this.msgs.length>0&&this.fileLimit<e.length;(this.isFileLimitExceeded()||i)&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}hasUploadedFiles(){return this.uploadedFiles&&this.uploadedFiles.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(Qe.addClass(this.content?.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||Qe.removeClass(this.content?.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){Qe.removeClass(this.content?.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let i=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||i&&i.length===1)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){let s=this.getTranslation(ne.FILE_SIZE_TYPES);if(e===0)return`0 ${s[0]}`;let u=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,u)).toFixed(3)} ${s[u]}`}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput?.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault();break}}imageError(e){this.onImageError.emit(e)}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(ne.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(ne.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(ne.CANCEL)}get browseFilesLabel(){return this.config.getTranslation(ne.ARIA)[ne.BROWSE_FILES]}ngOnDestroy(){this.content&&this.content.nativeElement&&this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)(U(Wt),U(Ut),U(Lt),U(ke),U(Yt),U(Vt),U(ce),U(Re),U(We))};static \u0275cmp=B({type:t,selectors:[["p-fileUpload"]],contentQueries:function(i,n,s){if(i&1&&Ve(s,Z,4),i&2){let u;ee(u=te())&&(n.templates=u)}},viewQuery:function(i,n){if(i&1&&(Ue(dn,5),Ue(mn,5),Ue(un,5)),i&2){let s;ee(s=te())&&(n.advancedFileInput=s.first),ee(s=te())&&(n.basicFileInput=s.first),ee(s=te())&&(n.content=s.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:[2,"multiple","multiple",A],accept:"accept",disabled:[2,"disabled","disabled",A],auto:[2,"auto","auto",A],withCredentials:[2,"withCredentials","withCredentials",A],maxFileSize:[2,"maxFileSize","maxFileSize",ze],invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:[2,"previewWidth","previewWidth",ze],chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:[2,"showUploadButton","showUploadButton",A],showCancelButton:[2,"showCancelButton","showCancelButton",A],mode:"mode",headers:"headers",customUpload:[2,"customUpload","customUpload",A],fileLimit:[2,"fileLimit","fileLimit",e=>ze(e,null)],uploadStyleClass:"uploadStyleClass",cancelStyleClass:"cancelStyleClass",removeStyleClass:"removeStyleClass",chooseStyleClass:"chooseStyleClass",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler",onImageError:"onImageError",onRemoveUploadedFile:"onRemoveUploadedFile"},standalone:!1,decls:2,vars:2,consts:[["advancedfileinput",""],["content",""],["chooseSection",""],["basicfileinput",""],[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],["type","file",3,"change","multiple","accept","disabled"],[1,"p-fileupload-buttonbar"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],["class","p-fileupload-empty",4,"ngIf"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"focus","blur","click","keydown.enter","ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],["type","button",3,"label","disabled","styleClass","onClick",4,"ngIf"],[3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-button-icon p-button-icon-left",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon","p-button-icon-left"],["type","button",3,"onClick","label","disabled","styleClass"],["class","p-button-icon p-button-icon-left",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left",3,"ngClass"],[3,"value","showValue"],[1,"p-fileupload-files"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[1,"p-fileupload-filename"],["type","button","pButton","",1,"p-button-icon-only",3,"click","disabled"],[3,"error","src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload-empty"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"click","keydown","ngClass","ngStyle"],[4,"ngIf","ngIfElse"],["class","p-button-label",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["class","p-button-icon p-button-icon-left pi",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["class","p-button-icon p-button-icon-left pi",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi"],["type","file",3,"change","focus","blur","accept","multiple","disabled"]],template:function(i,n){i&1&&m(0,eo,14,42,"div",4)(1,ho,8,17,"div",5),i&2&&(p("ngIf",n.mode==="advanced"),o(),p("ngIf",n.mode==="basic"))},dependencies:()=>[$e,Ae,Ne,qe,je,q,ni,xe,Ti,Ye,yt,St,fe],styles:[`@layer primeng{.p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}}
`],encapsulation:2,changeDetection:0})}return t})(),Ei=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Oe({type:t});static \u0275inj=De({imports:[N,pe,j,ae,wt,Ge,yt,St,fe,pe,j,ae,wt]})}return t})();var Tt=(()=>{class t{http=O(ce);API_URL=`${He.apiUrl}/documents`;uploadBatch(e,i,n){let s=new FormData;return e.forEach(u=>{s.append("files",u)}),s.append("document_type",i),n&&s.append("claim_id",n),this.http.post(`${this.API_URL}/batch-upload`,s,{withCredentials:!0})}uploadSingle(e,i,n){let s=new FormData;return s.append("file",e),s.append("document_type",i),n&&s.append("claim_id",n),this.http.post(`${this.API_URL}/upload`,s,{withCredentials:!0})}uploadWithProgress(e,i,n){let s=new FormData;return s.append("file",e),s.append("document_type",i),n&&s.append("claim_id",n),this.http.post(`${this.API_URL}/upload`,s,{withCredentials:!0,reportProgress:!0,observe:"events"}).pipe(Pt(u=>u.type===G.UploadProgress||u.type===G.Response),we(u=>{if(u.type===G.UploadProgress){let S=u,C=S.total??0,T=S.loaded;return{loaded:T,total:C,percentage:C>0?Math.round(T/C*100):0}}else return u.body}))}isUploadProgress(e){return"percentage"in e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var yo=(t,l)=>l.id;function So(t,l){if(t&1){let e=b();r(0,"div",19)(1,"button",20),v("click",function(){let n=f(e).chooseCallback;return g(n())}),a(),r(2,"span",21),d(3," PDF files only, max 50MB each, up to 10 files total "),a()()}}function bo(t,l){t&1&&(r(0,"div",22),_(1,"i",23),r(2,"p"),d(3,"Drag and drop claim PDF files here"),a(),r(4,"p",24),d(5,"Claim forms, invoices, medical records"),a()())}function wo(t,l){if(t&1&&m(0,bo,6,0,"div",22),t&2){let e=c();x(e.documents().length===0?0:-1)}}function To(t,l){t&1&&(r(0,"div",22),_(1,"i",23),r(2,"p"),d(3,"Drag and drop claim PDF files here"),a(),r(4,"p",24),d(5,"Claim forms, invoices, medical records"),a()())}function Mo(t,l){if(t&1&&(r(0,"div",36),_(1,"p-progressBar",41),a()),t&2){let e=c().$implicit;o(),p("value",e.progressPercent)("showValue",!0)}}function Po(t,l){if(t&1&&(r(0,"div",40),_(1,"i",42),d(2),a()),t&2){let e=c().$implicit;o(2),$(" ",e.error," ")}}function Eo(t,l){if(t&1){let e=b();r(0,"p-card",25)(1,"div",26)(2,"div",27),_(3,"i",28),a(),r(4,"div",29)(5,"span",30),d(6),a(),r(7,"div",31)(8,"span",32),d(9),a(),r(10,"span",33),d(11),a()()(),r(12,"div",34),_(13,"p-tag",35),a(),m(14,Mo,2,2,"div",36),r(15,"div",37)(16,"p-dropdown",38),Q("ngModelChange",function(n){let s=f(e).$implicit;return H(s.documentType,n)||(s.documentType=n),g(n)}),a(),r(17,"button",39),v("click",function(){let n=f(e).$implicit,s=c(2);return g(s.removeDocument(n.id))}),a()()(),m(18,Po,3,1,"div",40),a()}if(t&2){let e=l.$implicit,i=c(2);o(6),h(e.filename),o(3),h(i.formatFileSize(e.fileSize)),o(2),h(i.getDocumentTypeLabel(e.documentType)),o(2),p("value",e.status)("severity",i.getStatusSeverity(e.status)),o(),x(e.status==="uploading"?14:-1),o(2),p("options",i.documentTypeOptions),W("ngModel",e.documentType),p("disabled",e.status!=="pending"),o(),p("disabled",e.status==="uploading"),o(),x(e.error?18:-1)}}function Fo(t,l){if(t&1&&(r(0,"div",12)(1,"h4"),d(2),a(),F(3,Eo,19,11,"p-card",25,yo),a()),t&2){let e=c();o(2),$("Uploaded Documents (",e.documents().length,")"),o(),I(e.documents())}}function Io(t,l){if(t&1&&_(0,"p-message",43),t&2){let e=l.$implicit;p("text",e)}}function Do(t,l){if(t&1&&(r(0,"div",13),F(1,Io,1,1,"p-message",43,le),a()),t&2){let e=c();o(),I(e.validationErrors())}}function ko(t,l){if(t&1&&_(0,"p-message",14),t&2){let e=c();p("text",e.uploadError())}}function Oo(t,l){t&1&&_(0,"p-message",15)}var Oi=(()=>{class t{uploadService=O(Tt);destroy$=new re;initialData;stepComplete=new P;stepBack=new P;dirty=new P;documentTypeOptions=[{label:"Claim Form",value:"claim_form"},{label:"Invoice/Bill",value:"invoice"},{label:"Medical Records",value:"medical_record"},{label:"Other",value:"other"}];selectedDocType="claim_form";documents=E([]);validationErrors=E([]);uploadError=E(null);uploading=E(!1);canProceed=V(()=>this.documents().length>0);allUploaded=V(()=>this.documents().every(e=>e.documentId||e.status==="failed"));ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onFilesSelected(e){let i=e.files,n=[],s=[];for(let S of i){let C=Ct(S);if(C.valid){if(!this.documents().find(k=>k.filename===S.name)){let k=xt(S,this.selectedDocType);s.push(k)}}else n.push(`${S.name}: ${C.error}`)}this.documents().length+s.length>10&&(n.push("Maximum 10 files allowed. Please remove some files."),s.splice(10-this.documents().length)),s.length>0&&(this.documents.update(S=>[...S,...s]),this.dirty.emit(!0)),this.validationErrors.set(n)}removeDocument(e){this.documents.update(i=>i.filter(n=>n.id!==e)),this.dirty.emit(this.documents().length>0)}uploadDocuments(){return Ee(this,null,function*(){let e=this.documents().filter(i=>i.status==="pending");if(e.length===0)return!0;this.uploading.set(!0),this.uploadError.set(null);try{let i=new Map;for(let s of e){let u=i.get(s.documentType)||[];u.push(s),i.set(s.documentType,u)}this.documents.update(s=>s.map(u=>e.find(S=>S.id===u.id)?M(w({},u),{status:"uploading",progressPercent:0}):u));let n=!1;for(let[s,u]of i){let S=u.map(T=>T.file),C=yield this.uploadService.uploadBatch(S,s).toPromise();C&&(this.documents.update(T=>T.map(k=>{let tt=u.findIndex(D=>D.id===k.id);if(tt>=0){let D=C.documents[tt];return D&&D.status==="accepted"?M(w({},k),{documentId:D.document_id,status:"processing",progressPercent:25}):(n=!0,M(w({},k),{status:"failed",error:D?.message||"Upload failed"}))}return k})),C.failed>0&&(n=!0))}return n&&this.uploadError.set("Some files failed to upload. You can remove and retry them."),!n}catch{return this.uploadError.set("Failed to upload documents. Please try again."),this.documents.update(n=>n.map(s=>e.find(u=>u.id===s.id)?M(w({},s),{status:"failed",error:"Upload failed"}):s)),!1}finally{this.uploading.set(!1)}})}onBack(){this.stepBack.emit()}onNext(){return Ee(this,null,function*(){if(!this.canProceed())return;if(this.documents().filter(n=>n.status==="pending").length>0&&(yield this.uploadDocuments()),this.documents().filter(n=>n.documentId||n.status==="processing").length===0){this.uploadError.set("No documents were successfully uploaded. Please try again.");return}this.stepComplete.emit({documents:this.documents()})})}formatFileSize=oe;getStatusSeverity=ht;getDocumentTypeLabel=he;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=B({type:t,selectors:[["app-step-claim-docs"]],inputs:{initialData:"initialData"},outputs:{stepComplete:"stepComplete",stepBack:"stepBack",dirty:"dirty"},decls:24,vars:13,consts:[["fileUpload",""],[1,"step-claim-docs"],[1,"step-description"],[1,"required-note"],[1,"type-selector"],["for","docType"],["id","docType","optionLabel","label","optionValue","value","placeholder","Select document type","styleClass","type-dropdown",3,"ngModelChange","options","ngModel"],[1,"upload-section"],["name","claimDocs[]","accept",".pdf,application/pdf","styleClass","claim-upload",3,"uploadHandler","onSelect","multiple","maxFileSize","customUpload","showUploadButton","showCancelButton"],["pTemplate","header"],["pTemplate","content"],["pTemplate","empty"],[1,"files-list"],[1,"validation-errors"],["severity","error","styleClass","w-full mt-3",3,"text"],["severity","warn","text","Please upload at least one claim document to proceed.","styleClass","w-full mt-3"],[1,"step-navigation"],["pButton","","type","button","label","Back","icon","pi pi-arrow-left",1,"p-button-outlined",3,"click"],["pButton","","type","button","label","Upload & Process","icon","pi pi-arrow-right","iconPos","right",3,"click","disabled","loading"],[1,"upload-header"],["pButton","","type","button","icon","pi pi-plus","label","Choose Files",1,"p-button-outlined",3,"click"],[1,"upload-info"],[1,"upload-empty"],[1,"pi","pi-cloud-upload"],[1,"subtext"],["styleClass","file-card"],[1,"file-item"],[1,"file-icon"],[1,"pi","pi-file-pdf"],[1,"file-info"],[1,"file-name"],[1,"file-meta"],[1,"file-size"],[1,"file-type"],[1,"file-status"],[3,"value","severity"],[1,"file-progress"],[1,"file-actions"],["optionLabel","label","optionValue","value","styleClass","type-mini-dropdown",3,"ngModelChange","options","ngModel","disabled"],["pButton","","type","button","icon","pi pi-times","pTooltip","Remove","tooltipPosition","top",1,"p-button-text","p-button-danger","p-button-sm",3,"click","disabled"],[1,"file-error"],["styleClass","progress-bar-sm",3,"value","showValue"],[1,"pi","pi-exclamation-triangle"],["severity","error","styleClass","w-full",3,"text"]],template:function(i,n){if(i&1){let s=b();r(0,"div",1)(1,"h3"),d(2,"Step 3: Claim Documents"),a(),r(3,"p",2),d(4," Upload claim-related documents (PDF format). These will be automatically processed to extract claim data. "),r(5,"span",3),d(6,"At least one claim document is required."),a()(),r(7,"div",4)(8,"label",5),d(9,"Document Type:"),a(),r(10,"p-dropdown",6),Q("ngModelChange",function(S){return f(s),H(n.selectedDocType,S)||(n.selectedDocType=S),g(S)}),a()(),r(11,"div",7)(12,"p-fileUpload",8,0),v("uploadHandler",function(S){return f(s),g(n.onFilesSelected(S))})("onSelect",function(S){return f(s),g(n.onFilesSelected(S))}),m(14,So,4,0,"ng-template",9)(15,wo,1,1,"ng-template",10)(16,To,6,0,"ng-template",11),a()(),m(17,Fo,5,1,"div",12)(18,Do,3,0,"div",13)(19,ko,1,1,"p-message",14)(20,Oo,1,0,"p-message",15),r(21,"div",16)(22,"button",17),v("click",function(){return f(s),g(n.onBack())}),a(),r(23,"button",18),v("click",function(){return f(s),g(n.onNext())}),a()()()}i&2&&(o(10),p("options",n.documentTypeOptions),W("ngModel",n.selectedDocType),o(2),p("multiple",!0)("maxFileSize",52428800)("customUpload",!0)("showUploadButton",!1)("showCancelButton",!1),o(5),x(n.documents().length>0?17:-1),o(),x(n.validationErrors().length>0?18:-1),o(),x(n.uploadError()?19:-1),o(),x(n.documents().length===0?20:-1),o(3),p("disabled",!n.canProceed())("loading",n.uploading()))},dependencies:[N,ue,de,me,Ei,Pi,Z,q,xe,j,K,_e,ve,ge,ae,Se,ye,Ce,Ke,fi,_i],styles:[".step-claim-docs[_ngcontent-%COMP%]{padding:1rem}.step-description[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:1.5rem}.required-note[_ngcontent-%COMP%]{display:block;font-weight:500;color:#495057;margin-top:.25rem}.type-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.type-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#495057}[_nghost-%COMP%]     .type-dropdown{min-width:200px}.upload-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}[_nghost-%COMP%]     .claim-upload{border:2px dashed #ced4da;border-radius:8px;background:#fafafa}[_nghost-%COMP%]     .claim-upload .p-fileupload-content{padding:2rem}.upload-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#f8f9fa;border-bottom:1px solid #e9ecef}.upload-info[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem}.upload-empty[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d}.upload-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ced4da;margin-bottom:1rem}.upload-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.upload-empty[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:.9rem;color:#adb5bd}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.files-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:#495057}.file-card[_ngcontent-%COMP%]{margin-bottom:.75rem}[_nghost-%COMP%]     .file-card .p-card-body{padding:.75rem 1rem}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.file-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#dc3545;flex-shrink:0}.file-info[_ngcontent-%COMP%]{flex:1;min-width:150px}.file-name[_ngcontent-%COMP%]{display:block;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.85rem;color:#6c757d}.file-type[_ngcontent-%COMP%]{color:#06c}.file-status[_ngcontent-%COMP%]{flex-shrink:0}.file-progress[_ngcontent-%COMP%]{width:120px;flex-shrink:0}[_nghost-%COMP%]     .progress-bar-sm .p-progressbar{height:.5rem}.file-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-shrink:0}[_nghost-%COMP%]     .type-mini-dropdown{max-width:140px}[_nghost-%COMP%]     .type-mini-dropdown .p-dropdown-label{font-size:.85rem;padding:.25rem .5rem}.file-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem;padding:.5rem;background:#f8d7da;color:#721c24;border-radius:4px;font-size:.85rem}.validation-errors[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.step-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:2rem;padding-top:1rem;border-top:1px solid #dee2e6}@media (max-width: 768px){.type-selector[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.upload-header[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;text-align:center}.file-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.file-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.file-progress[_ngcontent-%COMP%]{width:100%}.step-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.step-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}return t})();var Vi=(()=>{class t{http=O(ce);API_URL=`${He.apiUrl}/documents`;POLL_INTERVAL=2e3;MAX_RETRIES=3;pollingCache=new Map;pollUntilComplete(e){let i=this.pollingCache.get(e);if(i)return i;let n=Fe(0,this.POLL_INTERVAL).pipe(It(()=>this.getStatus(e)),Dt(s=>s.status!=="completed"&&s.status!=="failed",!0),Et({count:this.MAX_RETRIES,delay:this.POLL_INTERVAL}),Ft({bufferSize:1,refCount:!0}));return this.pollingCache.set(e,n),n.subscribe({complete:()=>this.pollingCache.delete(e),error:()=>this.pollingCache.delete(e)}),n}getStatus(e){return this.http.get(`${this.API_URL}/${e}/status`,{withCredentials:!0})}getExtractedData(e){return this.http.get(`${this.API_URL}/${e}/extracted-data`,{withCredentials:!0})}pollMultiple(e){if(e.length===0)return be(new Map);let i=e.map(n=>this.pollUntilComplete(n).pipe(we(s=>({id:n,status:s})),nt(()=>be({id:n,status:this.createFailedStatus(n)}))));return it(i).pipe(we(n=>new Map(n.map(s=>[s.id,s.status]))))}getMultipleExtractedData(e){return e.length===0?be([]):it(e.map(i=>this.getExtractedData(i).pipe(nt(()=>be({document_id:i,extraction_confidence:0,data:{patient:{name:"",member_id:"",date_of_birth:"",gender:"",address:""},provider:{name:"",npi:"",tax_id:"",specialty:""},diagnoses:[],procedures:[],financial:{total_charged:"",currency:""},identifiers:{claim_number:"",prior_auth_number:"",policy_number:""},dates:{service_date_from:"",service_date_to:""},overall_confidence:0},needs_review:!0,validation_issues:["Failed to retrieve extracted data"]})))))}stopPolling(e){this.pollingCache.delete(e)}stopAllPolling(){this.pollingCache.clear()}createFailedStatus(e){return{document_id:e,status:"failed",processing_stage:"failed",progress_percent:0,needs_review:!0,error:"Failed to retrieve document status"}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Vo=(t,l)=>l.id,Mt=(t,l)=>l.key,Uo=(t,l)=>l.field,Bo=(t,l)=>l.documentId,Ui=(t,l)=>l.code;function Lo(t,l){if(t&1&&(r(0,"div",20)(1,"span",22),d(2),a(),_(3,"p-progressBar",23),a()),t&2){let e=c().$implicit,i=c();o(2),h(i.getStageLabel(e)),o(),p("value",i.getDocProgress(e))("showValue",!1)}}function Ro(t,l){if(t&1&&(r(0,"span",25),d(1),a()),t&2){let e=c(2).$implicit;p("pTooltip","OCR Confidence"),o(),$(" ",(e.ocrConfidence*100).toFixed(0),"% ")}}function zo(t,l){if(t&1&&(_(0,"p-tag",24),m(1,Ro,2,2,"span",25)),t&2){let e=c().$implicit;o(),x(e.ocrConfidence?1:-1)}}function $o(t,l){if(t&1&&(r(0,"span",27),d(1),a()),t&2){let e=c(2).$implicit;o(),h(e.error)}}function Ao(t,l){if(t&1&&(_(0,"p-tag",26),m(1,$o,2,1,"span",27)),t&2){let e=c().$implicit;o(),x(e.error?1:-1)}}function No(t,l){t&1&&_(0,"p-tag",21)}function jo(t,l){if(t&1&&(r(0,"p-card",7)(1,"div",13)(2,"div",14),_(3,"i",15),a(),r(4,"div",16)(5,"span",17),d(6),a(),r(7,"span",18),d(8),a()(),r(9,"div",19),m(10,Lo,4,3,"div",20)(11,zo,2,1)(12,Ao,2,1)(13,No,1,0,"p-tag",21),a()()()),t&2){let e=l.$implicit,i=c();o(6),h(e.filename),o(2),ie(" ",i.getDocumentTypeLabel(e.documentType)," \xB7 ",i.formatFileSize(e.fileSize)," "),o(2),x(e.status==="processing"||e.status==="uploading"?10:e.status==="completed"?11:e.status==="failed"?12:13)}}function qo(t,l){t&1&&_(0,"p-tag",28)}function Wo(t,l){if(t&1&&_(0,"p-message",41),t&2){let e=l.$implicit;p("text",e)}}function Ho(t,l){if(t&1&&(r(0,"div",29),F(1,Wo,1,1,"p-message",41,le),a()),t&2){let e=c(2);o(),I(e.validationIssues())}}function Qo(t,l){if(t&1){let e=b();r(0,"span",47),v("click",function(){let n=f(e).$implicit,s=c().$implicit,u=c(3);return g(u.resolveConflict(s,n.value,n.documentId))}),d(1),a()}if(t&2){let e=l.$implicit,i=c().$implicit;Y("selected",i.resolvedValue===e.value),o(),ie(" ",e.value," (",(e.confidence*100).toFixed(0),"%) ")}}function Yo(t,l){if(t&1&&(r(0,"div",43)(1,"span",44),d(2),a(),r(3,"div",45),F(4,Qo,2,4,"span",46,Bo),a()()),t&2){let e=l.$implicit;o(2),h(e.field),o(2),I(e.values)}}function Go(t,l){if(t&1&&(r(0,"p-card",30)(1,"p",42),d(2," Multiple documents contained different values for these fields. Please review and confirm. "),a(),F(3,Yo,6,1,"div",43,Uo),a()),t&2){let e=c(2);o(3),I(e.conflicts())}}function Zo(t,l){if(t&1){let e=b();r(0,"button",53),v("click",function(){f(e);let n=c().$implicit,s=c(2);return g(s.restoreField(n))}),a()}}function Ko(t,l){if(t&1){let e=b();r(0,"div",34)(1,"label",48),d(2),a(),r(3,"div",49)(4,"input",50),Q("ngModelChange",function(n){let s=f(e).$implicit;return H(s.value,n)||(s.value=n),g(n)}),v("ngModelChange",function(){let n=f(e).$implicit,s=c(2);return g(s.onFieldEdit(n))}),a(),_(5,"p-tag",51),a(),m(6,Zo,1,0,"button",52),a()}if(t&2){let e=l.$implicit,i=c(2);o(),p("for",e.key),o(),h(e.label),o(2),Y("edited",e.edited),p("id",e.key),W("ngModel",e.value),o(),p("value",(e.confidence*100).toFixed(0)+"%")("severity",i.getConfidenceSeverity(e.confidence))("pTooltip","Extraction confidence"),o(),x(e.edited?6:-1)}}function Xo(t,l){if(t&1){let e=b();r(0,"button",56),v("click",function(){f(e);let n=c().$implicit,s=c(2);return g(s.restoreField(n))}),a()}}function Jo(t,l){if(t&1){let e=b();r(0,"div",34)(1,"label",48),d(2),a(),r(3,"div",49)(4,"input",50),Q("ngModelChange",function(n){let s=f(e).$implicit;return H(s.value,n)||(s.value=n),g(n)}),v("ngModelChange",function(){let n=f(e).$implicit,s=c(2);return g(s.onFieldEdit(n))}),a(),_(5,"p-tag",54),a(),m(6,Xo,1,0,"button",55),a()}if(t&2){let e=l.$implicit,i=c(2);o(),p("for",e.key),o(),h(e.label),o(2),Y("edited",e.edited),p("id",e.key),W("ngModel",e.value),o(),p("value",(e.confidence*100).toFixed(0)+"%")("severity",i.getConfidenceSeverity(e.confidence)),o(),x(e.edited?6:-1)}}function ea(t,l){t&1&&_(0,"p-tag",60)}function ta(t,l){if(t&1&&(r(0,"div",57)(1,"span",58),d(2),a(),r(3,"span",59),d(4),a(),m(5,ea,1,0,"p-tag",60),_(6,"p-tag",61),a()),t&2){let e=l.$implicit,i=c(3);o(2),h(e.code),o(2),h(e.description),o(),x(e.is_primary?5:-1),o(),p("value",(e.confidence*100).toFixed(0)+"%")("severity",i.getConfidenceSeverity(e.confidence))}}function ia(t,l){if(t&1&&(r(0,"div",37),F(1,ta,7,5,"div",57,Ui),a()),t&2){let e=c(2);o(),I(e.mergedData().diagnoses)}}function na(t,l){t&1&&(r(0,"p",38),d(1,"No diagnosis codes extracted"),a())}function oa(t,l){if(t&1&&(r(0,"div",62)(1,"div",63)(2,"span",58),d(3),a(),r(4,"span",59),d(5),a()(),r(6,"div",64)(7,"span"),d(8),a(),r(9,"span"),d(10),a(),r(11,"span"),d(12),a()(),_(13,"p-tag",65),a()),t&2){let e=l.$implicit,i=c(3);o(3),h(e.code),o(2),h(e.description),o(3),$("Qty: ",e.quantity,""),o(2),$("Date: ",e.service_date,""),o(2),$("Charged: ",e.charged_amount,""),o(),p("value",(e.confidence*100).toFixed(0)+"%")("severity",i.getConfidenceSeverity(e.confidence))}}function aa(t,l){if(t&1&&(r(0,"div",37),F(1,oa,14,7,"div",62,Ui),a()),t&2){let e=c(2);o(),I(e.mergedData().procedures)}}function ra(t,l){t&1&&(r(0,"p",38),d(1,"No procedure codes extracted"),a())}function la(t,l){if(t&1){let e=b();r(0,"button",56),v("click",function(){f(e);let n=c().$implicit,s=c(2);return g(s.restoreField(n))}),a()}}function sa(t,l){if(t&1){let e=b();r(0,"div",34)(1,"label",48),d(2),a(),r(3,"div",49)(4,"input",50),Q("ngModelChange",function(n){let s=f(e).$implicit;return H(s.value,n)||(s.value=n),g(n)}),v("ngModelChange",function(){let n=f(e).$implicit,s=c(2);return g(s.onFieldEdit(n))}),a(),_(5,"p-tag",54),a(),m(6,la,1,0,"button",55),a()}if(t&2){let e=l.$implicit,i=c(2);o(),p("for",e.key),o(),h(e.label),o(2),Y("edited",e.edited),p("id",e.key),W("ngModel",e.value),o(),p("value",(e.confidence*100).toFixed(0)+"%")("severity",i.getConfidenceSeverity(e.confidence)),o(),x(e.edited?6:-1)}}function ca(t,l){if(t&1&&(r(0,"div",8)(1,"h4"),d(2," Extracted Data "),m(3,qo,1,0,"p-tag",28),a(),m(4,Ho,3,0,"div",29)(5,Go,5,0,"p-card",30),r(6,"p-accordion",31)(7,"p-accordionTab",32)(8,"div",33),F(9,Ko,7,10,"div",34,Mt),a()(),r(11,"p-accordionTab",35)(12,"div",33),F(13,Jo,7,9,"div",34,Mt),a()(),r(15,"p-accordionTab",36),m(16,ia,3,0,"div",37)(17,na,2,0,"p",38),a(),r(18,"p-accordionTab",39),m(19,aa,3,0,"div",37)(20,ra,2,0,"p",38),a(),r(21,"p-accordionTab",40)(22,"div",33),F(23,sa,7,9,"div",34,Mt),a()()()()),t&2){let e,i,n=c();o(3),x(n.needsReview()?3:-1),o(),x(n.validationIssues().length>0?4:-1),o(),x(n.conflicts().length>0?5:-1),o(),p("multiple",!0),o(3),I(n.patientFields()),o(4),I(n.providerFields()),o(3),x(!((e=n.mergedData())==null||e.diagnoses==null)&&e.diagnoses.length?16:17),o(3),x(!((i=n.mergedData())==null||i.procedures==null)&&i.procedures.length?19:20),o(4),I(n.financialFields())}}function pa(t,l){if(t&1&&_(0,"p-message",9),t&2){let e=c();p("text",e.processingError())}}var Bi=(()=>{class t{pollingService=O(Vi);destroy$=new re;policyDocuments=[];claimDocuments=[];stepComplete=new P;stepBack=new P;documentStatuses=E(new Map);extractedDataMap=E(new Map);mergedData=E(null);processingError=E(null);isProcessing=E(!1);patientFields=E([]);providerFields=E([]);financialFields=E([]);allDocuments=V(()=>[...this.policyDocuments,...this.claimDocuments].map(e=>this.getUpdatedDocument(e)));totalDocuments=V(()=>this.policyDocuments.length+this.claimDocuments.length);processedCount=V(()=>{let e=this.documentStatuses(),i=0;return e.forEach(n=>{(n.status==="completed"||n.status==="failed")&&i++}),i});overallProgress=V(()=>{let e=this.totalDocuments();if(e===0)return 100;let i=0,n=this.documentStatuses();return this.allDocuments().forEach(s=>{if(s.documentId){let u=n.get(s.documentId);u&&(i+=u.progress_percent)}}),Math.round(i/e)});hasExtractedData=V(()=>this.mergedData()!==null);needsReview=V(()=>this.mergedData()?.conflicts.some(e=>e.requiresReview)??!1);validationIssues=V(()=>{let e=[];return this.extractedDataMap().forEach(i=>{e.push(...i.validation_issues)}),[...new Set(e)]});conflicts=V(()=>this.mergedData()?.conflicts??[]);canProceed=V(()=>{let e=this.processedCount(),i=this.totalDocuments();return!(e<i||!this.allDocuments().every(u=>u.status==="failed")&&!this.hasExtractedData()||this.conflicts().filter(u=>u.requiresReview&&!u.resolvedValue).length>0)});ngOnInit(){this.startPolling()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.pollingService.stopAllPolling()}startPolling(){let e=this.allDocuments().filter(i=>i.documentId).map(i=>i.documentId);e.length!==0&&(this.isProcessing.set(!0),this.pollingService.pollMultiple(e).pipe(ot(this.destroy$)).subscribe({next:i=>{this.documentStatuses.set(i),this.checkProcessingComplete(i)},error:()=>{this.processingError.set("Failed to poll document status. Please try again."),this.isProcessing.set(!1)}}))}checkProcessingComplete(e){Array.from(e.values()).every(n=>n.status==="completed"||n.status==="failed")&&(this.isProcessing.set(!1),this.fetchExtractedData())}fetchExtractedData(){let e=Array.from(this.documentStatuses().entries()).filter(([i,n])=>n.status==="completed").map(([i])=>i);e.length!==0&&this.pollingService.getMultipleExtractedData(e).pipe(ot(this.destroy$)).subscribe({next:i=>{let n=new Map;i.forEach(s=>n.set(s.document_id,s)),this.extractedDataMap.set(n),this.mergeExtractedData(i)},error:()=>{this.processingError.set("Failed to fetch extracted data.")}})}mergeExtractedData(e){if(e.length===0)return;let i=e[0].data,n=[],s={},u=(C,T)=>{let k=e.map(D=>({documentId:D.document_id,value:T(D.data),confidence:D.extraction_confidence})).filter(D=>D.value);if(new Set(k.map(D=>JSON.stringify(D.value))).size>1){let D=k.sort((Ai,Ni)=>Ni.confidence-Ai.confidence);n.push({field:C,values:k,resolvedValue:D[0].value,resolvedFrom:D[0].documentId,requiresReview:D[0].confidence<.85})}else k.length>0&&(s[C]=k[0].documentId)};u("Patient Name",C=>C.patient.name),u("Member ID",C=>C.patient.member_id),u("Date of Birth",C=>C.patient.date_of_birth),u("Provider Name",C=>C.provider.name),u("Provider NPI",C=>C.provider.npi);let S=M(w({},i),{conflicts:n,fieldSources:s});this.mergedData.set(S),this.initializeEditableFields(S)}initializeEditableFields(e){let i=e.overall_confidence;this.patientFields.set([{key:"patient_name",label:"Patient Name",value:e.patient.name,originalValue:e.patient.name,confidence:i,source:"",edited:!1},{key:"member_id",label:"Member ID",value:e.patient.member_id,originalValue:e.patient.member_id,confidence:i,source:"",edited:!1},{key:"date_of_birth",label:"Date of Birth",value:e.patient.date_of_birth,originalValue:e.patient.date_of_birth,confidence:i,source:"",edited:!1},{key:"gender",label:"Gender",value:e.patient.gender,originalValue:e.patient.gender,confidence:i,source:"",edited:!1},{key:"address",label:"Address",value:e.patient.address,originalValue:e.patient.address,confidence:i,source:"",edited:!1}]),this.providerFields.set([{key:"provider_name",label:"Provider Name",value:e.provider.name,originalValue:e.provider.name,confidence:i,source:"",edited:!1},{key:"provider_npi",label:"NPI",value:e.provider.npi,originalValue:e.provider.npi,confidence:i,source:"",edited:!1},{key:"tax_id",label:"Tax ID",value:e.provider.tax_id,originalValue:e.provider.tax_id,confidence:i,source:"",edited:!1},{key:"specialty",label:"Specialty",value:e.provider.specialty,originalValue:e.provider.specialty,confidence:i,source:"",edited:!1}]),this.financialFields.set([{key:"total_charged",label:"Total Charged",value:e.financial.total_charged,originalValue:e.financial.total_charged,confidence:i,source:"",edited:!1},{key:"currency",label:"Currency",value:e.financial.currency,originalValue:e.financial.currency,confidence:i,source:"",edited:!1}])}getUpdatedDocument(e){if(!e.documentId)return e;let i=this.documentStatuses().get(e.documentId);return i?M(w({},e),{status:i.status,progressPercent:i.progress_percent,processingStage:i.processing_stage,ocrConfidence:i.ocr_confidence,parsingConfidence:i.parsing_confidence,error:i.error,needsReview:i.needs_review}):e}getDocProgress(e){return e.documentId?this.documentStatuses().get(e.documentId)?.progress_percent??e.progressPercent:0}getStageLabel(e){if(!e.documentId)return"Waiting...";let i=this.documentStatuses().get(e.documentId);return i?.processing_stage?ri(i.processing_stage):"Processing..."}resolveConflict(e,i,n){let s=this.mergedData();if(!s)return;let u=s.conflicts.map(S=>S.field===e.field?M(w({},S),{resolvedValue:i,resolvedFrom:n,requiresReview:!1}):S);this.mergedData.set(M(w({},s),{conflicts:u}))}onFieldEdit(e){e.edited=e.value!==e.originalValue}restoreField(e){e.value=e.originalValue,e.edited=!1}onBack(){this.pollingService.stopAllPolling(),this.stepBack.emit()}onNext(){if(!this.canProceed())return;let e=this.applyFieldEdits();this.stepComplete.emit({policyDocuments:this.policyDocuments.map(i=>this.getUpdatedDocument(i)),claimDocuments:this.claimDocuments.map(i=>this.getUpdatedDocument(i)),mergedData:e,allProcessed:!0})}applyFieldEdits(){let e=this.mergedData();if(!e)return null;let i=this.patientFields(),n=w({},e.patient);i.forEach(T=>{if(T.edited)switch(T.key){case"patient_name":n.name=T.value;break;case"member_id":n.member_id=T.value;break;case"date_of_birth":n.date_of_birth=T.value;break;case"gender":n.gender=T.value;break;case"address":n.address=T.value;break}});let s=this.providerFields(),u=w({},e.provider);s.forEach(T=>{if(T.edited)switch(T.key){case"provider_name":u.name=T.value;break;case"provider_npi":u.npi=T.value;break;case"tax_id":u.tax_id=T.value;break;case"specialty":u.specialty=T.value;break}});let S=this.financialFields(),C=w({},e.financial);return S.forEach(T=>{if(T.edited)switch(T.key){case"total_charged":C.total_charged=T.value;break;case"currency":C.currency=T.value;break}}),M(w({},e),{patient:n,provider:u,financial:C})}getDocumentTypeLabel=he;formatFileSize=oe;getConfidenceSeverity=Ze;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=B({type:t,selectors:[["app-step-processing"]],inputs:{policyDocuments:"policyDocuments",claimDocuments:"claimDocuments"},outputs:{stepComplete:"stepComplete",stepBack:"stepBack"},decls:22,vars:8,consts:[[1,"step-processing"],[1,"step-description"],[1,"overall-progress"],[1,"progress-header"],[1,"progress-text"],["styleClass","overall-progress-bar",3,"value","showValue"],[1,"documents-section"],["styleClass","document-card"],[1,"extracted-data-section"],["severity","error","styleClass","w-full mt-3",3,"text"],[1,"step-navigation"],["pButton","","type","button","label","Back","icon","pi pi-arrow-left",1,"p-button-outlined",3,"click"],["pButton","","type","button","label","Continue to Review","icon","pi pi-arrow-right","iconPos","right",3,"click","disabled","loading"],[1,"document-row"],[1,"doc-icon"],[1,"pi","pi-file-pdf"],[1,"doc-info"],[1,"doc-name"],[1,"doc-meta"],[1,"doc-status"],[1,"processing-info"],["value","Pending","severity","secondary"],[1,"stage-label"],["styleClass","doc-progress-bar",3,"value","showValue"],["value","Completed","severity","success","icon","pi pi-check"],[1,"confidence-badge",3,"pTooltip"],["value","Failed","severity","danger","icon","pi pi-times"],[1,"error-text"],["value","Needs Review","severity","warn","styleClass","ml-2"],[1,"validation-issues"],["header","Data Conflicts","styleClass","conflicts-card"],[3,"multiple"],["header","Patient Information"],[1,"field-grid"],[1,"editable-field"],["header","Provider Information"],["header","Diagnosis Codes"],[1,"codes-list"],[1,"no-data"],["header","Procedure Codes"],["header","Financial Information"],["severity","warn","styleClass","w-full",3,"text"],[1,"conflicts-info"],[1,"conflict-item"],[1,"conflict-field"],[1,"conflict-values"],[1,"conflict-value",3,"selected"],[1,"conflict-value",3,"click"],[3,"for"],[1,"field-input-wrapper"],["pInputText","",3,"ngModelChange","id","ngModel"],["styleClass","confidence-tag",3,"value","severity","pTooltip"],["pButton","","type","button","icon","pi pi-undo","pTooltip","Restore original",1,"p-button-text","p-button-sm"],["pButton","","type","button","icon","pi pi-undo","pTooltip","Restore original",1,"p-button-text","p-button-sm",3,"click"],["styleClass","confidence-tag",3,"value","severity"],["pButton","","type","button","icon","pi pi-undo",1,"p-button-text","p-button-sm"],["pButton","","type","button","icon","pi pi-undo",1,"p-button-text","p-button-sm",3,"click"],[1,"code-item"],[1,"code-value"],[1,"code-description"],["value","Primary","severity","info","styleClass","ml-2"],["styleClass","ml-auto",3,"value","severity"],[1,"code-item","procedure"],[1,"proc-main"],[1,"proc-details"],[3,"value","severity"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"h3"),d(2,"Step 4: Document Processing"),a(),r(3,"p",1),d(4," Your documents are being processed. Extracted data will appear below for review and editing. "),a(),r(5,"div",2)(6,"div",3)(7,"span"),d(8,"Overall Progress"),a(),r(9,"span",4),d(10),a()(),_(11,"p-progressBar",5),a(),r(12,"div",6)(13,"h4"),d(14,"Document Status"),a(),F(15,jo,14,4,"p-card",7,Vo),a(),m(17,ca,25,6,"div",8)(18,pa,1,1,"p-message",9),r(19,"div",10)(20,"button",11),v("click",function(){return n.onBack()}),a(),r(21,"button",12),v("click",function(){return n.onNext()}),a()()()),i&2&&(o(10),ie("",n.processedCount()," of ",n.totalDocuments()," documents"),o(),p("value",n.overallProgress())("showValue",!0),o(4),I(n.allDocuments()),o(2),x(n.hasExtractedData()?17:-1),o(),x(n.processingError()?18:-1),o(3),p("disabled",!n.canProceed())("loading",n.isProcessing()))},dependencies:[N,ue,Jt,de,me,Xe,vi,gi,j,q,K,_e,ti,ei,hi,ve,ge,ae,xe,Se,ye,Ce,Ke,Je],styles:[".step-processing[_ngcontent-%COMP%]{padding:1rem}.step-description[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:1.5rem}.overall-progress[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:8px;margin-bottom:1.5rem}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-weight:500}.progress-text[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem}[_nghost-%COMP%]     .overall-progress-bar .p-progressbar{height:1rem}.documents-section[_ngcontent-%COMP%]{margin-bottom:2rem}.documents-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:#495057}.document-card[_ngcontent-%COMP%]{margin-bottom:.75rem}[_nghost-%COMP%]     .document-card .p-card-body{padding:.75rem 1rem}.document-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.doc-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#dc3545}.doc-info[_ngcontent-%COMP%]{flex:1;min-width:0}.doc-name[_ngcontent-%COMP%]{display:block;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.doc-meta[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.doc-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-shrink:0}.processing-info[_ngcontent-%COMP%]{width:200px}.stage-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#6c757d;margin-bottom:.25rem}[_nghost-%COMP%]     .doc-progress-bar .p-progressbar{height:.5rem}.confidence-badge[_ngcontent-%COMP%]{background:#e9ecef;padding:.25rem .5rem;border-radius:4px;font-size:.8rem}.error-text[_ngcontent-%COMP%]{color:#dc3545;font-size:.85rem}.extracted-data-section[_ngcontent-%COMP%]{margin-top:2rem}.extracted-data-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.validation-issues[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.conflicts-card[_ngcontent-%COMP%]{margin-bottom:1rem;border-left:4px solid #ffc107}.conflicts-info[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:1rem}.conflict-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.5rem 0;border-bottom:1px solid #e9ecef}.conflict-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.conflict-field[_ngcontent-%COMP%]{font-weight:500;min-width:150px}.conflict-values[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.conflict-value[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#f8f9fa;border:1px solid #dee2e6;border-radius:4px;cursor:pointer;transition:all .2s}.conflict-value[_ngcontent-%COMP%]:hover{background:#e9ecef}.conflict-value.selected[_ngcontent-%COMP%]{background:#0d6efd;color:#fff;border-color:#0d6efd}.field-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}.editable-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.editable-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.9rem;color:#495057}.field-input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.field-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.field-input-wrapper[_ngcontent-%COMP%]   input.edited[_ngcontent-%COMP%]{border-color:#ffc107;background:#fffbea}[_nghost-%COMP%]     .confidence-tag{font-size:.75rem;padding:.25rem .5rem}.codes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.code-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem;background:#f8f9fa;border-radius:4px}.code-item.procedure[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.proc-main[_ngcontent-%COMP%]{display:flex;gap:1rem;width:100%}.proc-details[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.85rem;color:#6c757d}.code-value[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;background:#e9ecef;padding:.25rem .5rem;border-radius:4px}.code-description[_ngcontent-%COMP%]{flex:1}.no-data[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}.step-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:2rem;padding-top:1rem;border-top:1px solid #dee2e6}@media (max-width: 768px){.document-row[_ngcontent-%COMP%]{flex-wrap:wrap}.doc-status[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.processing-info[_ngcontent-%COMP%]{width:100%}.field-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.conflict-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"],changeDetection:0})}return t})();var Li=()=>[],Ri=(t,l)=>l.field,zi=(t,l)=>l.id;function da(t,l){t&1&&(r(0,"div",17),_(1,"i",18),r(2,"span"),d(3,"Validation Errors"),a()())}function ma(t,l){if(t&1&&(r(0,"li"),d(1),a()),t&2){let e=l.$implicit;o(),h(e.message)}}function ua(t,l){if(t&1&&(r(0,"p-card",2),m(1,da,4,0,"ng-template",5),r(2,"ul",16),F(3,ma,2,1,"li",null,Ri),a()()),t&2){let e=c();o(3),I(e.validationErrors())}}function _a(t,l){t&1&&(r(0,"div",19),_(1,"i",20),r(2,"span"),d(3,"Warnings"),a()())}function fa(t,l){if(t&1&&(r(0,"li"),d(1),a()),t&2){let e=l.$implicit;o(),h(e.message)}}function ga(t,l){if(t&1&&(r(0,"p-card",3),m(1,_a,4,0,"ng-template",5),r(2,"ul",16),F(3,fa,2,1,"li",null,Ri),a()()),t&2){let e=c();o(3),I(e.validationWarnings())}}function va(t,l){if(t&1){let e=b();r(0,"div",21)(1,"h4"),d(2,"Member Information"),a(),r(3,"button",22),v("click",function(){f(e);let n=c();return g(n.editStep(0))}),a()()}}function ha(t,l){if(t&1&&(r(0,"div",7)(1,"span",8),d(2,"Coverage Type"),a(),r(3,"span",9),d(4),a()()),t&2){let e=c();o(4),h(e.formState==null||e.formState.member==null||e.formState.member.eligibilityResponse==null?null:e.formState.member.eligibilityResponse.coverageType)}}function Ca(t,l){if(t&1){let e=b();r(0,"div",21)(1,"h4"),d(2,"Uploaded Documents"),a(),r(3,"div",26)(4,"button",27),v("click",function(){f(e);let n=c(2);return g(n.editStep(1))}),a(),r(5,"button",28),v("click",function(){f(e);let n=c(2);return g(n.editStep(2))}),a()()()}}function xa(t,l){t&1&&_(0,"p-message",23)}function ya(t,l){if(t&1&&(r(0,"div",29),_(1,"i",30),r(2,"div",31)(3,"span",32),d(4),a(),r(5,"span",33),d(6),a()(),_(7,"p-tag",34),a()),t&2){let e=l.$implicit,i=c(3);o(4),h(e.filename),o(2),h(i.formatFileSize(e.fileSize)),o(),p("value",e.status)("severity",e.status==="completed"?"success":e.status==="failed"?"danger":"info")}}function Sa(t,l){if(t&1&&(r(0,"div",25)(1,"h5"),d(2),a(),F(3,ya,8,4,"div",29,zi),a()),t&2){let e=c(2);o(2),$("Policy Documents (",e.enhancedFormState.policyDocuments.length,")"),o(),I(e.enhancedFormState.policyDocuments)}}function ba(t,l){if(t&1&&(r(0,"div",29),_(1,"i",30),r(2,"div",31)(3,"span",32),d(4),a(),r(5,"span",33),d(6),a()(),_(7,"p-tag",34),a()),t&2){let e=l.$implicit,i=c(3);o(4),h(e.filename),o(2),ie("",i.getDocumentTypeLabel(e.documentType)," \xB7 ",i.formatFileSize(e.fileSize),""),o(),p("value",e.status)("severity",e.status==="completed"?"success":e.status==="failed"?"danger":"info")}}function wa(t,l){if(t&1&&(r(0,"div",25)(1,"h5"),d(2),a(),F(3,ba,8,5,"div",29,zi),a()),t&2){let e=c(2);o(2),$("Claim Documents (",e.enhancedFormState.claimDocuments.length,")"),o(),I(e.enhancedFormState.claimDocuments)}}function Ta(t,l){if(t&1&&_(0,"p-message",37),t&2){let e=c(3);p("text",e.enhancedFormState.mergedExtractedData.conflicts.length+" data conflict(s) were resolved")}}function Ma(t,l){if(t&1&&(_(0,"p-divider"),r(1,"div",35)(2,"h5"),d(3,"Data Extraction Summary"),a(),r(4,"div",36)(5,"span"),d(6,"Overall Confidence:"),a(),_(7,"p-tag",34),a(),m(8,Ta,1,1,"p-message",37),a()),t&2){let e=c(2);o(7),p("value",(e.enhancedFormState.mergedExtractedData.overall_confidence*100).toFixed(0)+"%")("severity",e.getConfidenceSeverity(e.enhancedFormState.mergedExtractedData.overall_confidence)),o(),x(e.enhancedFormState.mergedExtractedData.conflicts!=null&&e.enhancedFormState.mergedExtractedData.conflicts.length?8:-1)}}function Pa(t,l){if(t&1&&(r(0,"p-card",4),m(1,Ca,6,0,"ng-template",5)(2,xa,1,0,"p-message",23),r(3,"div",24),m(4,Sa,5,1,"div",25)(5,wa,5,1,"div",25),a(),m(6,Ma,9,3),a()),t&2){let e=c();o(2),x(e.enhancedFormState!=null&&e.enhancedFormState.policyDocsSkipped?2:-1),o(2),x(!(e.enhancedFormState==null||e.enhancedFormState.policyDocuments==null)&&e.enhancedFormState.policyDocuments.length?4:-1),o(),x(!(e.enhancedFormState==null||e.enhancedFormState.claimDocuments==null)&&e.enhancedFormState.claimDocuments.length?5:-1),o(),x(e.enhancedFormState!=null&&e.enhancedFormState.mergedExtractedData?6:-1)}}function Ea(t,l){if(t&1){let e=b();r(0,"div",21)(1,"h4"),d(2,"Provider Information"),a(),r(3,"button",22),v("click",function(){f(e);let n=c();return g(n.editStep(4))}),a()()}}function Fa(t,l){if(t&1&&(r(0,"div",7)(1,"span",8),d(2,"Prior Auth #"),a(),r(3,"span",9),d(4),a()()),t&2){let e=c();o(4),h(e.formState==null||e.formState.provider==null?null:e.formState.provider.priorAuthNumber)}}function Ia(t,l){if(t&1){let e=b();r(0,"div",21)(1,"h4"),d(2,"Service Information"),a(),r(3,"button",22),v("click",function(){f(e);let n=c();return g(n.editStep(5))}),a()()}}function Da(t,l){t&1&&(r(0,"small"),d(1,"(Primary)"),a())}function ka(t,l){if(t&1&&(r(0,"span",38),d(1),m(2,Da,2,0,"small"),a()),t&2){let e=l.$implicit,i=l.$index,n=c();Y("primary",e===(n.formState==null||n.formState.services==null?null:n.formState.services.primaryDiagnosis)),o(),ie(" ",i+1,". ",e," "),o(),x(e===(n.formState==null||n.formState.services==null?null:n.formState.services.primaryDiagnosis)?2:-1)}}function Oa(t,l){t&1&&(r(0,"tr")(1,"th"),d(2,"#"),a(),r(3,"th"),d(4,"Procedure"),a(),r(5,"th"),d(6,"Modifiers"),a(),r(7,"th"),d(8,"Date"),a(),r(9,"th"),d(10,"Qty"),a(),r(11,"th",39),d(12,"Charged"),a()())}function Va(t,l){if(t&1&&(r(0,"tr")(1,"td"),d(2),a(),r(3,"td"),d(4),a(),r(5,"td"),d(6),a(),r(7,"td"),d(8),se(9,"date"),a(),r(10,"td"),d(11),a(),r(12,"td",39),d(13),se(14,"currency"),a()()),t&2){let e=l.$implicit,i=l.rowIndex;o(2),h(i+1),o(2),h(e.procedureCode),o(2),h((e.modifiers==null?null:e.modifiers.join(", "))||"-"),o(2),h(Le(9,6,e.serviceDate,"shortDate")),o(3),h(e.quantity),o(2),h(lt(14,9,e.chargedAmount))}}function Ua(t,l){if(t&1&&(r(0,"tr")(1,"td",40)(2,"strong"),d(3,"Total Charged:"),a()(),r(4,"td",39)(5,"strong"),d(6),se(7,"currency"),a()()()),t&2){let e=c();o(6),h(lt(7,1,e.totalCharged()))}}function Ba(t,l){if(t&1){let e=b();r(0,"div",15)(1,"button",41),v("click",function(){f(e);let n=c();return g(n.onBack())}),a(),r(2,"button",42),v("click",function(){f(e);let n=c();return g(n.onProceedToSubmit())}),a()()}}function La(t,l){if(t&1&&_(0,"p-message",46),t&2){let e=c(2);p("text",e.submitError())}}function Ra(t,l){if(t&1){let e=b();r(0,"div",43)(1,"p-checkbox",44),Q("ngModelChange",function(n){f(e);let s=c();return H(s.confirmed,n)||(s.confirmed=n),g(n)}),a(),r(2,"label",45),d(3," I confirm that the information provided is accurate and complete. I understand that submitting false claims may result in penalties. "),a()(),m(4,La,1,1,"p-message",46),r(5,"div",15)(6,"button",41),v("click",function(){f(e);let n=c();return g(n.onBack())}),a(),r(7,"div",47)(8,"button",48),v("click",function(){f(e);let n=c();return g(n.onSaveDraft())}),a(),r(9,"button",49),v("click",function(){f(e);let n=c();return g(n.onSubmit())}),a()()()}if(t&2){let e=c();o(),W("ngModel",e.confirmed),p("binary",!0),o(3),x(e.submitError()?4:-1),o(4),p("loading",e.saving()),o(),p("disabled",!e.canSubmit())("loading",e.submitting())}}var $i=(()=>{class t{claimsApi=O(li);formState;enhancedFormState;editMode=!1;stepBack=new P;editStepRequest=new P;submitSuccess=new P;draftSaved=new P;dataUpdated=new P;proceedToSubmit=new P;confirmed=!1;validationErrors=E([]);validationWarnings=E([]);submitting=E(!1);saving=E(!1);submitError=E(null);totalCharged=V(()=>(this.formState?.services?.lineItems||[]).reduce((e,i)=>e+(i.chargedAmount||0),0));canSubmit=V(()=>this.confirmed&&this.validationErrors().length===0&&!this.submitting());hasDocuments(){let e=this.enhancedFormState;return e?e.policyDocuments?.length>0||e.claimDocuments?.length>0||e.policyDocsSkipped:!1}formatFileSize=oe;getDocumentTypeLabel=he;getConfidenceSeverity=Ze;editStep(e){this.editStepRequest.emit(e)}onBack(){this.stepBack.emit()}onProceedToSubmit(){this.proceedToSubmit.emit()}onSaveDraft(){this.formState&&(this.saving.set(!0),this.submitError.set(null),this.buildClaimCreate(),setTimeout(()=>{this.saving.set(!1),this.draftSaved.emit("draft-"+Date.now())},1e3))}onSubmit(){if(!this.canSubmit()||!this.formState)return;this.submitting.set(!0),this.submitError.set(null);let e=this.buildClaimCreate();this.claimsApi.createClaim(e).subscribe({next:i=>{this.submitting.set(!1),this.submitSuccess.emit(i.id)},error:i=>{this.submitting.set(!1),this.submitError.set(i.message||"Failed to submit claim")}})}buildClaimCreate(){let e=this.formState,i=(e.services?.lineItems||[]).map(s=>({procedure_code:s.procedureCode,procedure_code_system:s.procedureCodeSystem==="CPT"?"CPT-4":"HCPCS",modifier_codes:s.modifiers,service_date:this.formatDate(s.serviceDate),quantity:s.quantity,unit_price:s.unitPrice,charged_amount:s.chargedAmount})),n={claim_type:ai.PROFESSIONAL,service_date_from:this.formatDate(e.services.serviceDateFrom),service_date_to:this.formatDate(e.services.serviceDateTo),diagnosis_codes:e.services.diagnosisCodes,primary_diagnosis:e.services.primaryDiagnosis,total_charged:this.totalCharged(),line_items:i,place_of_service:e.provider.placeOfService||void 0,prior_auth_number:e.provider.priorAuthNumber||void 0};return(e.member.memberId||e.member.policyId)&&(n.member_id=e.member.memberId||void 0,n.policy_id=e.member.policyId||void 0),(e.provider.providerId||e.provider.providerNPI)&&(n.provider_id=e.provider.providerId||void 0,e.provider.providerNPI&&(n.provider={npi:e.provider.providerNPI})),n}formatDate(e){return e?typeof e=="string"?e:e.toISOString().split("T")[0]:""}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=B({type:t,selectors:[["app-step-review"]],inputs:{formState:"formState",enhancedFormState:"enhancedFormState",editMode:"editMode"},outputs:{stepBack:"stepBack",editStepRequest:"editStepRequest",submitSuccess:"submitSuccess",draftSaved:"draftSaved",dataUpdated:"dataUpdated",proceedToSubmit:"proceedToSubmit"},decls:76,vars:25,consts:[[1,"step-review"],[1,"step-description"],["styleClass","validation-card error"],["styleClass","validation-card warning"],["styleClass","summary-card"],["pTemplate","header"],[1,"summary-grid"],[1,"summary-item"],[1,"label"],[1,"value"],[1,"diagnosis-summary"],[1,"diagnosis-chip",3,"primary"],["styleClass","p-datatable-sm",3,"value"],["pTemplate","body"],["pTemplate","footer"],[1,"step-navigation"],[1,"validation-list"],[1,"validation-header","error"],[1,"pi","pi-times-circle"],[1,"validation-header","warning"],[1,"pi","pi-exclamation-triangle"],[1,"summary-header"],["pButton","","type","button","label","Edit","icon","pi pi-pencil",1,"p-button-text","p-button-sm",3,"click"],["severity","info","text","Policy documents were skipped","styleClass","mb-3"],[1,"documents-grid"],[1,"doc-group"],[1,"header-actions"],["pButton","","type","button","label","Policy Docs","icon","pi pi-pencil",1,"p-button-text","p-button-sm",3,"click"],["pButton","","type","button","label","Claim Docs","icon","pi pi-pencil",1,"p-button-text","p-button-sm",3,"click"],[1,"doc-item"],[1,"pi","pi-file-pdf","doc-icon"],[1,"doc-info"],[1,"doc-name"],[1,"doc-meta"],[3,"value","severity"],[1,"extraction-summary"],[1,"confidence-info"],["severity","warn","styleClass","mt-2",3,"text"],[1,"diagnosis-chip"],[1,"text-right"],["colspan","5",1,"text-right"],["pButton","","type","button","label","Back","icon","pi pi-arrow-left",1,"p-button-outlined",3,"click"],["pButton","","type","button","label","Proceed to Submit","icon","pi pi-arrow-right",3,"click"],[1,"confirmation-section"],["inputId","confirmSubmit",3,"ngModelChange","ngModel","binary"],["for","confirmSubmit",1,"confirmation-label"],["severity","error","styleClass","w-full mt-3",3,"text"],[1,"submit-actions"],["pButton","","type","button","label","Save as Draft","icon","pi pi-save",1,"p-button-outlined",3,"click","loading"],["pButton","","type","button","label","Submit Claim","icon","pi pi-send",3,"click","disabled","loading"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"h3"),d(2,"Step 7: Review & Submit"),a(),r(3,"p",1),d(4,"Review all claim details and uploaded documents before submission."),a(),m(5,ua,5,0,"p-card",2)(6,ga,5,0,"p-card",3),r(7,"p-card",4),m(8,va,4,0,"ng-template",5),r(9,"div",6)(10,"div",7)(11,"span",8),d(12,"Member ID"),a(),r(13,"span",9),d(14),a()(),r(15,"div",7)(16,"span",8),d(17,"Policy ID"),a(),r(18,"span",9),d(19),a()(),r(20,"div",7)(21,"span",8),d(22,"Eligibility"),a(),r(23,"span",9),d(24),a()(),m(25,ha,5,1,"div",7),a()(),m(26,Pa,7,4,"p-card",4),r(27,"p-card",4),m(28,Ea,4,0,"ng-template",5),r(29,"div",6)(30,"div",7)(31,"span",8),d(32,"Provider ID"),a(),r(33,"span",9),d(34),a()(),r(35,"div",7)(36,"span",8),d(37,"NPI"),a(),r(38,"span",9),d(39),a()(),r(40,"div",7)(41,"span",8),d(42,"Place of Service"),a(),r(43,"span",9),d(44),a()(),m(45,Fa,5,1,"div",7),a()(),r(46,"p-card",4),m(47,Ia,4,0,"ng-template",5),r(48,"div",6)(49,"div",7)(50,"span",8),d(51,"Service Date From"),a(),r(52,"span",9),d(53),se(54,"date"),a()(),r(55,"div",7)(56,"span",8),d(57,"Service Date To"),a(),r(58,"span",9),d(59),se(60,"date"),a()()(),_(61,"p-divider"),r(62,"h5"),d(63,"Diagnosis Codes"),a(),r(64,"div",10),F(65,ka,3,5,"span",11,le),a(),_(67,"p-divider"),r(68,"h5"),d(69,"Service Lines"),a(),r(70,"p-table",12),m(71,Oa,13,0,"ng-template",5)(72,Va,15,11,"ng-template",13)(73,Ua,8,3,"ng-template",14),a()(),m(74,Ba,3,0,"div",15)(75,Ra,10,6),a()),i&2&&(o(5),x(n.validationErrors().length>0?5:-1),o(),x(n.validationWarnings().length>0?6:-1),o(8),h(n.formState==null||n.formState.member==null?null:n.formState.member.memberId),o(5),h(n.formState==null||n.formState.member==null?null:n.formState.member.policyId),o(4),Y("verified",n.formState==null||n.formState.member==null?null:n.formState.member.eligibilityVerified),o(),$(" ",!(n.formState==null||n.formState.member==null)&&n.formState.member.eligibilityVerified?"Verified":"Not Verified"," "),o(),x(!(n.formState==null||n.formState.member==null)&&n.formState.member.eligibilityResponse?25:-1),o(),x(n.hasDocuments()?26:-1),o(8),h(n.formState==null||n.formState.provider==null?null:n.formState.provider.providerId),o(5),h(n.formState==null||n.formState.provider==null?null:n.formState.provider.providerNPI),o(5),h(n.formState==null||n.formState.provider==null?null:n.formState.provider.placeOfService),o(),x(!(n.formState==null||n.formState.provider==null)&&n.formState.provider.priorAuthNumber?45:-1),o(8),h(Le(54,17,n.formState==null||n.formState.services==null?null:n.formState.services.serviceDateFrom,"mediumDate")),o(6),h(Le(60,20,n.formState==null||n.formState.services==null?null:n.formState.services.serviceDateTo,"mediumDate")),o(6),I((n.formState==null||n.formState.services==null?null:n.formState.services.diagnosisCodes)||rt(23,Li)),o(5),p("value",(n.formState==null||n.formState.services==null?null:n.formState.services.lineItems)||rt(24,Li)),o(4),x(n.editMode?74:75))},dependencies:[N,Qt,Ht,ue,de,me,j,q,Z,K,_e,Je,Ci,yi,xi,ve,ge,bi,Si,Se,ye,Xe,Ce],styles:[".step-review[_ngcontent-%COMP%]{padding:1rem}.step-description[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:1.5rem}.validation-card[_ngcontent-%COMP%]{margin-bottom:1rem}.validation-card.error   [_nghost-%COMP%]     .p-card{border-left:4px solid #dc3545}.validation-card.warning   [_nghost-%COMP%]     .p-card{border-left:4px solid #ffc107}.validation-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;font-weight:600}.validation-header.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.validation-header.warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.validation-list[_ngcontent-%COMP%]{margin:0;padding-left:1.5rem}.validation-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.25rem}.summary-card[_ngcontent-%COMP%]{margin-bottom:1rem}.summary-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#f8f9fa}.summary-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;padding:1rem}.summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500}.summary-item[_ngcontent-%COMP%]   .value.verified[_ngcontent-%COMP%]{color:#28a745}.diagnosis-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;padding:0 1rem}.diagnosis-chip[_ngcontent-%COMP%]{background:#f8f9fa;padding:.5rem 1rem;border-radius:4px;font-size:.9rem}.diagnosis-chip.primary[_ngcontent-%COMP%]{background:#e7f3ff;border:1px solid #0066cc}.diagnosis-chip[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#06c;margin-left:.25rem}h5[_ngcontent-%COMP%]{padding:0 1rem;margin:1rem 0 .5rem}.text-right[_ngcontent-%COMP%]{text-align:right}.confirmation-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:1rem;background:#f8f9fa;border-radius:4px;margin-top:1.5rem}.confirmation-label[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.5;cursor:pointer}.step-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem;padding-top:1rem;border-top:1px solid #dee2e6}.submit-actions[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;padding:1rem}.doc-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:0;margin:0 0 .75rem;color:#495057}.doc-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem;background:#f8f9fa;border-radius:4px;margin-bottom:.5rem}.doc-icon[_ngcontent-%COMP%]{font-size:1.25rem;color:#dc3545}.doc-info[_ngcontent-%COMP%]{flex:1;min-width:0}.doc-name[_ngcontent-%COMP%]{display:block;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.doc-meta[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.extraction-summary[_ngcontent-%COMP%]{padding:1rem}.extraction-summary[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:0;margin:0 0 .75rem}.confidence-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@media (max-width: 768px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.submit-actions[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]{flex-direction:column}.documents-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})}return t})();function za(t,l){if(t&1){let e=b();r(0,"app-step-claim-docs",9),v("stepComplete",function(n){f(e);let s=c();return g(s.onDocumentsComplete(n))})("stepBack",function(){f(e);let n=c();return g(n.goBack())})("dirty",function(n){f(e);let s=c();return g(s.onDirtyChange(n))}),a()}if(t&2){let e=c();p("initialData",e.getClaimDocsData())}}function $a(t,l){if(t&1){let e=b();r(0,"app-step-processing",10),v("stepComplete",function(n){f(e);let s=c();return g(s.onProcessingComplete(n))})("stepBack",function(){f(e);let n=c();return g(n.goBack())}),a()}if(t&2){let e=c();p("policyDocuments",e.enhancedFormState().policyDocuments)("claimDocuments",e.enhancedFormState().claimDocuments)}}function Aa(t,l){if(t&1){let e=b();r(0,"app-step-review",11),v("stepBack",function(){f(e);let n=c();return g(n.goBack())})("editStepRequest",function(n){f(e);let s=c();return g(s.goToStep(n))})("dataUpdated",function(n){f(e);let s=c();return g(s.onDataUpdated(n))})("proceedToSubmit",function(){f(e);let n=c();return g(n.onProceedToSubmit())}),a()}if(t&2){let e=c();p("formState",e.formState())("enhancedFormState",e.enhancedFormState())("editMode",!0)}}function Na(t,l){if(t&1){let e=b();r(0,"app-step-review",12),v("stepBack",function(){f(e);let n=c();return g(n.goBack())})("submitSuccess",function(n){f(e);let s=c();return g(s.onSubmitSuccess(n))})("draftSaved",function(n){f(e);let s=c();return g(s.onDraftSaved(n))}),a()}if(t&2){let e=c();p("formState",e.formState())("enhancedFormState",e.enhancedFormState())("editMode",!1)}}function ja(t,l){t&1&&(r(0,"div",8),_(1,"i",13),d(2," Unsaved changes "),a())}var Vs=(()=>{class t{router=O(Zt);route=O(Gt);confirmationService=O(mt);messageService=O(Pe);interfaceSwitcher=O(oi);destroy$=new re;steps=[{label:"Upload Documents",icon:"pi pi-upload"},{label:"Processing",icon:"pi pi-cog"},{label:"Review Data",icon:"pi pi-pencil"},{label:"Submit",icon:"pi pi-check-square"}];currentStep=E(0);formState=E(vt());enhancedFormState=E(M(w({},vt()),{policyDocuments:[],claimDocuments:[],mergedExtractedData:null,policyDocsSkipped:!1}));isDirty=E(!1);completedSteps=E(new Set);ngOnInit(){let e=this.route.snapshot.params.draftId;e&&this.loadDraft(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadDraft(e){console.log("Loading draft:",e)}onStepClick(e){e<=this.getMaxAllowedStep()&&this.currentStep.set(e)}getMaxAllowedStep(){let e=Array.from(this.completedSteps());return e.length===0?0:Math.max(...e)+1}onDocumentsComplete(e){this.enhancedFormState.update(i=>M(w({},i),{claimDocuments:e.documents})),this.completedSteps.update(i=>new Set([...i,0])),this.currentStep.set(1)}onProcessingComplete(e){let i=e.mergedData,n={memberId:i?.patient?.member_id||"",policyId:"",eligibilityVerified:!1,eligibilityResponse:void 0},s={providerId:"",providerNPI:i?.provider?.npi||"",placeOfService:"11",priorAuthNumber:"",referringProviderId:""},u=new Date().toISOString().split("T")[0],S={serviceDateFrom:u,serviceDateTo:u,primaryDiagnosis:i?.diagnoses?.[0]?.code||"",diagnosisCodes:i?.diagnoses?.map(C=>C.code)||[],lineItems:i?.procedures?.map(C=>({procedureCode:C.code,procedureCodeSystem:"CPT",modifiers:C.modifiers||[],serviceDate:u,quantity:1,unitPrice:0,chargedAmount:0,diagnosisPointers:[1]}))||[]};this.enhancedFormState.update(C=>M(w({},C),{policyDocuments:e.policyDocuments,claimDocuments:e.claimDocuments,mergedExtractedData:i})),this.formState.update(C=>M(w({},C),{member:n,provider:s,services:S})),this.completedSteps.update(C=>new Set([...C,1])),this.currentStep.set(2)}onDataUpdated(e){e.member&&(this.formState.update(i=>M(w({},i),{member:e.member})),this.enhancedFormState.update(i=>M(w({},i),{member:e.member}))),e.provider&&(this.formState.update(i=>M(w({},i),{provider:e.provider})),this.enhancedFormState.update(i=>M(w({},i),{provider:e.provider}))),e.services&&(this.formState.update(i=>M(w({},i),{services:e.services})),this.enhancedFormState.update(i=>M(w({},i),{services:e.services})))}onProceedToSubmit(){this.completedSteps.update(e=>new Set([...e,2])),this.currentStep.set(3)}onMemberComplete(e){this.formState.update(i=>M(w({},i),{member:e})),this.enhancedFormState.update(i=>M(w({},i),{member:e}))}onProviderComplete(e){this.formState.update(i=>M(w({},i),{provider:e})),this.enhancedFormState.update(i=>M(w({},i),{provider:e}))}onServicesComplete(e){this.formState.update(i=>M(w({},i),{services:e})),this.enhancedFormState.update(i=>M(w({},i),{services:e}))}getPolicyDocsData(){let e=this.enhancedFormState();if(e.policyDocuments.length>0||e.policyDocsSkipped)return{documents:e.policyDocuments,skipped:e.policyDocsSkipped}}getClaimDocsData(){let e=this.enhancedFormState();if(e.claimDocuments.length>0)return{documents:e.claimDocuments}}goBack(){this.currentStep()>0&&this.currentStep.update(e=>e-1)}goToStep(e){this.currentStep.set(e)}onDirtyChange(e){this.isDirty.set(e)}onSubmitSuccess(e){this.messageService.add({severity:"success",summary:"Claim Submitted",detail:`Claim ${e} has been submitted successfully.`,life:5e3});let i=this.interfaceSwitcher.getCurrentBasePath();setTimeout(()=>{this.router.navigate([`${i}/claims`])},1500)}onDraftSaved(e){this.messageService.add({severity:"info",summary:"Draft Saved",detail:"Your claim draft has been saved."}),this.isDirty.set(!1),this.formState.update(i=>M(w({},i),{draftId:e}))}onCancel(){let e=this.interfaceSwitcher.getCurrentBasePath();this.isDirty()?this.confirmationService.confirm({message:"You have unsaved changes. Are you sure you want to cancel?",header:"Confirm Cancel",icon:"pi pi-exclamation-triangle",accept:()=>{this.router.navigate([`${e}/claims`])}}):this.router.navigate([`${e}/claims`])}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=B({type:t,selectors:[["app-claim-submit"]],features:[$t([mt,Pe])],decls:14,vars:5,consts:[[1,"claim-submit-wizard"],[1,"wizard-header"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["styleClass","wizard-steps",3,"activeIndexChange","model","activeIndex","readonly"],[1,"wizard-content"],[3,"initialData"],[3,"policyDocuments","claimDocuments"],[3,"formState","enhancedFormState","editMode"],[1,"draft-indicator"],[3,"stepComplete","stepBack","dirty","initialData"],[3,"stepComplete","stepBack","policyDocuments","claimDocuments"],[3,"stepBack","editStepRequest","dataUpdated","proceedToSubmit","formState","enhancedFormState","editMode"],[3,"stepBack","submitSuccess","draftSaved","formState","enhancedFormState","editMode"],[1,"pi","pi-exclamation-circle"]],template:function(i,n){if(i&1&&(r(0,"div",0),_(1,"p-toast")(2,"p-confirmDialog"),r(3,"div",1)(4,"h2"),d(5,"New Claim Submission"),a(),r(6,"button",2),v("click",function(){return n.onCancel()}),a()(),r(7,"p-steps",3),v("activeIndexChange",function(u){return n.onStepClick(u)}),a(),r(8,"div",4),m(9,za,1,1,"app-step-claim-docs",5)(10,$a,1,2,"app-step-processing",6)(11,Aa,1,3,"app-step-review",7)(12,Na,1,3,"app-step-review",7),a(),m(13,ja,3,0,"div",8),a()),i&2){let s;o(7),p("model",n.steps)("activeIndex",n.currentStep())("readonly",!1),o(2),x((s=n.currentStep())===0?9:s===1?10:s===2?11:s===3?12:-1),o(4),x(n.isDirty()?13:-1)}},dependencies:[N,ci,si,K,j,q,di,pi,ui,mi,Oi,Bi,$i],styles:[".claim-submit-wizard[_ngcontent-%COMP%]{padding:1.5rem;background:#f8f9fa;min-height:100vh}.wizard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.wizard-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#343a40}[_nghost-%COMP%]     .wizard-steps{margin-bottom:2rem}[_nghost-%COMP%]     .wizard-steps .p-steps-item{flex:1}[_nghost-%COMP%]     .wizard-steps .p-steps-item .p-menuitem-link{flex-direction:column;gap:.5rem}.wizard-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:1.5rem;min-height:500px}.draft-indicator[_ngcontent-%COMP%]{position:fixed;bottom:1rem;left:1rem;background:#fff3cd;color:#856404;padding:.5rem 1rem;border-radius:4px;display:flex;align-items:center;gap:.5rem;font-size:.85rem;box-shadow:0 2px 4px #0000001a}"],changeDetection:0})}return t})();export{Vs as ClaimSubmitComponent};
