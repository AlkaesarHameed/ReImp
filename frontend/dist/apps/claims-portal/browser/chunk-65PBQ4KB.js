import{a as ce}from"./chunk-Z35PPS42.js";import{a as pe}from"./chunk-RE5X3647.js";import{a as be,b as we}from"./chunk-NW2C26PC.js";import{c as he,d as _e,g as fe,h as Se,i as ye,k as xe}from"./chunk-PK23XMUB.js";import"./chunk-AUFHY7VS.js";import"./chunk-XPWDESDQ.js";import"./chunk-ER3XKTCP.js";import"./chunk-JA2DIW7E.js";import{a as ge,b as Ce}from"./chunk-ZMZXLXSM.js";import"./chunk-L7CYZS6T.js";import{a as de,b as ue}from"./chunk-SGA43OA7.js";import{a as oe,b as le}from"./chunk-JTFR2SS7.js";import{a as ee,b as te}from"./chunk-RANQPQCM.js";import{a as Y,b as Z}from"./chunk-EQ7FBPX2.js";import"./chunk-ZURLY7IA.js";import"./chunk-E5KJRRTP.js";import"./chunk-XKZBSERL.js";import"./chunk-ZCMJ7UQL.js";import"./chunk-GGQ7LRWG.js";import{d as ie,f as ne}from"./chunk-QJZJPKUU.js";import"./chunk-2UYTTCDL.js";import"./chunk-SILQIBBA.js";import{n as G}from"./chunk-CMI2WP65.js";import"./chunk-F2X3VGZZ.js";import{b as J,e as K,g as Q,p as X}from"./chunk-COAKLJSO.js";import{a as me}from"./chunk-C7COBHZM.js";import{a as re,b as ae,d as se,e as I}from"./chunk-Y2YSYY3G.js";import"./chunk-QB55GBCV.js";import{b as $,e as H}from"./chunk-TD2OOY6M.js";import"./chunk-R72WXHZK.js";import{o as j,q as U,t as N,u as q}from"./chunk-2QNP6Q64.js";import{Ac as _,Bb as i,Cb as n,Db as m,Hb as b,Kb as d,Lb as u,T as E,Tb as a,Ub as C,Vb as M,Xa as l,Yb as v,Zb as L,_b as k,ac as A,bc as w,da as f,fb as R,g as B,ka as S,kb as h,kc as T,la as y,lc as P,mc as W,sb as p,ub as V,vb as D,xb as x,ya as F}from"./chunk-UUFN4DK2.js";import{a as O,b as z}from"./chunk-4CLCTAJ7.js";var Me=()=>[10,20,50,100],Te=o=>[o],ve=o=>({"background-color":o}),Le=o=>[o,"review"];function ke(o,g){if(o&1){let e=b();i(0,"button",20),d("click",function(){S(e);let t=u(2);return y(t.refresh())}),n()}}function Pe(o,g){if(o&1&&(m(0,"p-message",18),h(1,ke,1,0,"button",19)),o&2){let e=u();p("text",e.error()),l(),x(e.showRetry()?1:-1)}}function Ee(o,g){if(o&1){let e=b();i(0,"span",21),a(1),n(),i(2,"button",22),d("click",function(){S(e);let t=u();return y(t.clearSelection())}),n()}if(o&2){let e=u();l(),M("",e.selectedClaimIds().length," selected")}}function Ie(o,g){if(o&1){let e=b();i(0,"tr")(1,"th",23)(2,"p-checkbox",24),d("onChange",function(){S(e);let t=u();return y(t.selectedClaimIds().length===t.claims().length?t.clearSelection():t.selectAllClaims())}),n()(),i(3,"th",25),a(4," Tracking # "),m(5,"p-sortIcon",26),n(),i(6,"th",27),a(7," Status "),m(8,"p-sortIcon",28),n(),i(9,"th",29),a(10," Type "),m(11,"p-sortIcon",30),n(),i(12,"th"),a(13,"Member"),n(),i(14,"th"),a(15,"Provider"),n(),i(16,"th",31),a(17," Service Date "),m(18,"p-sortIcon",32),n(),i(19,"th",33),a(20," Charged "),m(21,"p-sortIcon",34),n(),i(22,"th",35),a(23," Paid "),m(24,"p-sortIcon",36),n(),i(25,"th"),a(26,"Actions"),n()()}if(o&2){let e=u();l(2),p("binary",!0)("ngModel",e.selectedClaimIds().length===e.claims().length&&e.claims().length>0)}}function Oe(o,g){if(o&1&&m(0,"button",42),o&2){let e=u().$implicit;p("routerLink",w(1,Le,e.id))}}function ze(o,g){if(o&1){let e=b();i(0,"tr")(1,"td",23)(2,"p-checkbox",24),d("onChange",function(){let t=S(e).$implicit,s=u();return y(s.toggleClaimSelection(t.id))}),n()(),i(3,"td")(4,"a",37),a(5),n()(),i(6,"td"),m(7,"p-tag",38),n(),i(8,"td"),a(9),T(10,"titlecase"),n(),i(11,"td"),a(12),n(),i(13,"td"),a(14),n(),i(15,"td"),a(16),T(17,"date"),n(),i(18,"td",39),a(19),T(20,"currency"),n(),i(21,"td",39),a(22),T(23,"currency"),n(),i(24,"td")(25,"div",40),m(26,"button",41),h(27,Oe,1,3,"button",42),n()()()}if(o&2){let e=g.$implicit,r=u();V("selected-row",r.isSelected(e.id)),l(2),p("binary",!0)("ngModel",r.isSelected(e.id)),l(2),p("routerLink",w(26,Te,e.id)),l(),M(" ",e.tracking_number," "),l(2),D(w(28,ve,r.getStatusColor(e.status))),p("value",r.getStatusLabel(e.status)),l(2),C(P(10,17,e.claim_type)),l(3),C(e.member_id),l(2),C(e.provider_id),l(2),C(W(17,19,e.service_date_from,"shortDate")),l(3),C(P(20,22,e.total_charged)),l(3),C(P(23,24,e.total_paid)),l(4),p("routerLink",w(30,Te,e.id)),l(),x(e.status==="needs_review"?27:-1)}}function Be(o,g){o&1&&(i(0,"tr")(1,"td",43),m(2,"i",44),i(3,"p",45),a(4,"No claims found"),n()()())}var ht=(()=>{class o{route=f($);claimsStore=f(ce);claimsApi=f(me);wsService=f(pe);destroy$=new B;claims=_(()=>this.claimsStore.paginatedClaims());totalRecords=_(()=>this.claimsStore.totalCount());loading=_(()=>this.claimsStore.loading());error=_(()=>this.claimsStore.error());showRetry=_(()=>!!this.claimsStore.error());_selectedClaimIds=F([]);selectedClaimIds=this._selectedClaimIds.asReadonly();pageSize=20;virtualScroll=!0;searchTerm="";selectedStatus=null;selectedType=null;statusOptions=Object.values(re).map(e=>({label:I(e),value:e}));typeOptions=Object.values(ae).map(e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e}));getStatusColor=se;getStatusLabel=I;ngOnInit(){let e=this.route.snapshot.queryParams.status;e&&(this.selectedStatus=e,this.claimsStore.setFilters({status:e})),this.wsService.connect(),this.wsService.getClaimUpdates().pipe(E(this.destroy$)).subscribe(r=>{r.forEach(t=>{this.claimsStore.handleClaimUpdate(z(O({},t),{status:t.status}))})}),this.loadClaims({first:0,rows:this.pageSize})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadClaims(e){this.claimsStore.setLoading(!0);let t={page:Math.floor(e.first/e.rows)+1,size:e.rows,status:this.selectedStatus||void 0,claimType:this.selectedType||void 0,search:this.searchTerm||void 0,sortBy:e.sortField,sortOrder:e.sortOrder===1?"asc":"desc"};this.claimsApi.getClaims(t).pipe(E(this.destroy$)).subscribe({next:s=>{this.claimsStore.setClaims(s.items),this.claimsStore.setCurrentPage(s.page),this.claimsStore.setPageSize(s.size),this.claimsStore.setLoading(!1),this.claimsStore.setError(null)},error:s=>{this.claimsStore.setError(s.message||"Failed to load claims"),this.claimsStore.setLoading(!1)}})}onSearch(){this.claimsStore.setFilters({searchTerm:this.searchTerm}),this.loadClaims({first:0,rows:this.pageSize})}onFilterChange(){this.claimsStore.setFilters({status:this.selectedStatus||void 0,claimType:this.selectedType||void 0}),this.loadClaims({first:0,rows:this.pageSize})}onPageChange(e){this.claimsStore.setCurrentPage(e.page),this.claimsStore.setPageSize(e.rows),this.loadClaims({first:(e.page-1)*e.rows,rows:e.rows})}clearFilters(){this.searchTerm="",this.selectedStatus=null,this.selectedType=null,this.claimsStore.clearFilters(),this.loadClaims({first:0,rows:this.pageSize})}refresh(){this.loadClaims({first:0,rows:this.pageSize})}onClaimSelect(e){this.claimsStore.selectClaim(e.id)}toggleClaimSelection(e){this._selectedClaimIds.update(r=>r.includes(e)?r.filter(t=>t!==e):[...r,e])}selectAllClaims(){let e=this.claims().map(r=>r.id);this._selectedClaimIds.set(e)}clearSelection(){this._selectedClaimIds.set([])}isSelected(e){return this._selectedClaimIds().includes(e)}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=R({type:o,selectors:[["app-claims-list"]],decls:25,vars:21,consts:[[1,"claims-container"],[1,"claims-header"],[1,"header-content"],[1,"pi","pi-file"],[1,"header-actions"],["pButton","","label","New Claim","icon","pi pi-plus","routerLink","new"],["styleClass","filters-card"],[1,"filters-row"],[1,"p-input-icon-left","flex-1"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search claims...",1,"w-full",3,"ngModelChange","input","ngModel"],["placeholder","All Statuses",3,"ngModelChange","onChange","options","ngModel","showClear"],["placeholder","All Types",3,"ngModelChange","onChange","options","ngModel","showClear"],["pButton","","icon","pi pi-refresh","pTooltip","Refresh",1,"p-button-outlined",3,"click"],["scrollHeight","600px","styleClass","p-datatable-sm p-datatable-striped",3,"onLazyLoad","value","lazy","paginator","rows","totalRecords","loading","rowsPerPageOptions","scrollable","virtualScroll","virtualScrollItemSize"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["severity","error","styleClass","mb-3 w-full",3,"text"],["pButton","","label","Retry","icon","pi pi-refresh",1,"p-button-outlined","mb-3"],["pButton","","label","Retry","icon","pi pi-refresh",1,"p-button-outlined","mb-3",3,"click"],[1,"selection-info"],["pButton","","label","Clear","icon","pi pi-times",1,"p-button-text",3,"click"],[1,"checkbox-col"],[3,"onChange","binary","ngModel"],["pSortableColumn","tracking_number"],["field","tracking_number"],["pSortableColumn","status"],["field","status"],["pSortableColumn","claim_type"],["field","claim_type"],["pSortableColumn","service_date_from"],["field","service_date_from"],["pSortableColumn","total_charged",1,"text-right"],["field","total_charged"],["pSortableColumn","total_paid",1,"text-right"],["field","total_paid"],[1,"tracking-link",3,"routerLink"],[3,"value"],[1,"text-right"],[1,"action-buttons"],["pButton","","icon","pi pi-eye","pTooltip","View",1,"p-button-text","p-button-sm",3,"routerLink"],["pButton","","icon","pi pi-check-square","pTooltip","Review",1,"p-button-text","p-button-sm","p-button-success",3,"routerLink"],["colspan","10",1,"text-center","p-4"],[1,"pi","pi-inbox","text-4xl","text-gray-300","mb-2"],[1,"text-gray-500"]],template:function(r,t){r&1&&(i(0,"div",0),h(1,Pe,2,2),i(2,"div",1)(3,"div",2)(4,"h1"),m(5,"i",3),a(6," Claims"),n(),i(7,"p"),a(8),n()(),i(9,"div",4),h(10,Ee,3,1),m(11,"button",5),n()(),i(12,"p-card",6)(13,"div",7)(14,"span",8),m(15,"i",9),i(16,"input",10),k("ngModelChange",function(c){return L(t.searchTerm,c)||(t.searchTerm=c),c}),d("input",function(){return t.onSearch()}),n()(),i(17,"p-dropdown",11),k("ngModelChange",function(c){return L(t.selectedStatus,c)||(t.selectedStatus=c),c}),d("onChange",function(){return t.onFilterChange()}),n(),i(18,"p-dropdown",12),k("ngModelChange",function(c){return L(t.selectedType,c)||(t.selectedType=c),c}),d("onChange",function(){return t.onFilterChange()}),n(),i(19,"button",13),d("click",function(){return t.refresh()}),n()()(),i(20,"p-card")(21,"p-table",14),d("onLazyLoad",function(c){return t.loadClaims(c)}),h(22,Ie,27,2,"ng-template",15)(23,ze,28,32,"ng-template",16)(24,Be,5,0,"ng-template",17),n()()()),r&2&&(l(),x(t.error()?1:-1),l(7),M("",t.totalRecords()," total claims"),l(2),x(t.selectedClaimIds().length>0?10:-1),l(6),v("ngModel",t.searchTerm),l(),p("options",t.statusOptions),v("ngModel",t.selectedStatus),p("showClear",!0),l(),p("options",t.typeOptions),v("ngModel",t.selectedType),p("showClear",!0),l(3),p("value",t.claims())("lazy",!0)("paginator",!0)("rows",20)("totalRecords",t.totalRecords())("loading",t.loading())("rowsPerPageOptions",A(20,Me))("scrollable",!0)("virtualScroll",!0)("virtualScrollItemSize",48))},dependencies:[q,j,N,U,H,X,J,K,Q,xe,fe,G,Se,ye,ne,ie,te,ee,_e,he,Ce,ge,Z,Y,ue,de,we,be,le,oe],styles:[".claims-container[_ngcontent-%COMP%]{padding:1.5rem;background:#f8f9fa;min-height:100vh}.claims-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.selection-info[_ngcontent-%COMP%]{color:#06c;font-weight:500}.claims-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#343a40;display:flex;align-items:center;gap:.5rem}.claims-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#6c757d;font-size:.9rem}[_nghost-%COMP%]     .filters-card .p-card-body{padding:1rem}.filters-row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.tracking-link[_ngcontent-%COMP%]{color:#06c;text-decoration:none;font-weight:500}.tracking-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.25rem}.text-right[_ngcontent-%COMP%]{text-align:right}.checkbox-col[_ngcontent-%COMP%]{width:50px;text-align:center}.selected-row[_ngcontent-%COMP%]{background-color:#0066cc1a!important}@media (max-width: 768px){.filters-row[_ngcontent-%COMP%]{flex-direction:column}.filters-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}return o})();export{ht as ClaimsListComponent};
