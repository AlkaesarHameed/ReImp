import{a as se}from"./chunk-Z35PPS42.js";import{a as ce}from"./chunk-RE5X3647.js";import{b as Z,e as ee,g as te,k as ie,l as ne,m as ae,p as le}from"./chunk-COAKLJSO.js";import{a as oe}from"./chunk-C7COBHZM.js";import{a as h,b as re,e as B}from"./chunk-Y2YSYY3G.js";import"./chunk-QB55GBCV.js";import{b as X,e as Y}from"./chunk-TD2OOY6M.js";import"./chunk-R72WXHZK.js";import{o as H,q as J,t as K,u as Q}from"./chunk-2QNP6Q64.js";import{Ab as b,Ac as C,Bb as i,Cb as t,Db as u,Hb as E,Kb as g,Lb as p,T as D,Tb as o,Ub as _,Vb as P,Xa as l,Xb as U,Yb as w,Zb as L,_b as I,ac as q,bc as V,da as v,fb as $,g as N,ka as f,kb as y,kc as T,la as S,lc as F,mc as G,sb as m,ub as k,wb as j,xb as M,ya as A,yb as R,zb as x}from"./chunk-UUFN4DK2.js";import{a as W,b as z}from"./chunk-4CLCTAJ7.js";var pe=()=>[1,2,3,4,5],de=n=>[n],ue=n=>[n,"review"],me=(n,s)=>s.value,ge=(n,s)=>s.id;function _e(n,s){if(n&1&&(i(0,"option",12),o(1),t()),n&2){let e=s.$implicit;m("ngValue",e.value),l(),_(e.label)}}function he(n,s){if(n&1&&(i(0,"option",12),o(1),t()),n&2){let e=s.$implicit;m("ngValue",e.value),l(),_(e.label)}}function Ce(n,s){if(n&1){let e=E();i(0,"div",18)(1,"i",29),u(2,"span",5)(3,"span",6),t(),i(4,"div",30)(5,"h4",31),o(6,"Error"),t(),i(7,"span"),o(8),t()(),i(9,"button",32),g("click",function(){f(e);let a=p();return S(a.refresh())}),o(10," Retry "),t()()}if(n&2){let e=p();l(8),_(e.error())}}function fe(n,s){n&1&&(i(0,"tr")(1,"td",33)(2,"div",34),u(3,"span",35),t()()())}function Se(n,s){n&1&&x(0,fe,4,0,"tr",null,R),n&2&&b(q(0,pe))}function xe(n,s){if(n&1&&(i(0,"a",44)(1,"i",45),u(2,"span",5)(3,"span",6),t()()),n&2){let e=p().$implicit;m("routerLink",V(1,ue,e.id))}}function be(n,s){if(n&1){let e=E();i(0,"tr")(1,"td")(2,"div",23)(3,"input",24),g("change",function(){let a=f(e).$implicit,c=p(2);return S(c.toggleClaimSelection(a.id))}),t()()(),i(4,"td")(5,"a",37),o(6),t()(),i(7,"td")(8,"span"),o(9),t()(),i(10,"td")(11,"span",38),o(12),T(13,"titlecase"),t()(),i(14,"td"),o(15),t(),i(16,"td"),o(17),t(),i(18,"td"),o(19),T(20,"date"),t(),i(21,"td",39),o(22),T(23,"currency"),t(),i(24,"td",39),o(25),T(26,"currency"),t(),i(27,"td",39)(28,"div",40)(29,"a",41)(30,"i",42),u(31,"span",5)(32,"span",6)(33,"span",43),t()(),y(34,xe,4,3,"a",44),t()()()}if(n&2){let e=s.$implicit,r=p(2);k("table-active",r.isSelected(e.id)),l(3),m("checked",r.isSelected(e.id)),l(2),m("routerLink",V(25,de,e.id)),l(),P(" ",e.tracking_number," "),l(2),j(r.getStatusBadgeClass(e.status)),l(),P(" ",r.getStatusLabel(e.status)," "),l(3),P(" ",F(13,16,e.claim_type)," "),l(3),_(e.member_id),l(2),_(e.provider_id),l(2),_(G(20,18,e.service_date_from,"shortDate")),l(3),_(F(23,21,e.total_charged)),l(3),_(F(26,23,e.total_paid)),l(4),m("routerLink",V(27,de,e.id)),l(5),M(e.status==="needs_review"?34:-1)}}function ve(n,s){n&1&&(i(0,"tr")(1,"td",46)(2,"div",47)(3,"i",48),u(4,"span",5)(5,"span",6),t(),i(6,"span",49),o(7,"No claims found"),t()()()())}function ye(n,s){if(n&1&&x(0,be,35,29,"tr",36,ge,!1,ve,8,0,"tr"),n&2){let e=p();b(e.claims())}}function ke(n,s){if(n&1){let e=E();i(0,"li",52)(1,"button",57),g("click",function(){let a=f(e).$implicit,c=p(2);return S(c.goToPage(a))}),o(2),t()()}if(n&2){let e=s.$implicit,r=p(2);k("active",e===r.currentPage()),l(2),P(" ",e," ")}}function Me(n,s){if(n&1){let e=E();i(0,"div",28)(1,"div",50),o(2),t(),i(3,"ul",51)(4,"li",52)(5,"button",53),g("click",function(){f(e);let a=p();return S(a.goToPage(a.currentPage()-1))}),u(6,"i",54),t()(),x(7,ke,3,3,"li",55,R),i(9,"li",52)(10,"button",53),g("click",function(){f(e);let a=p();return S(a.goToPage(a.currentPage()+1))}),u(11,"i",56),t()()()()}if(n&2){let e=p();l(2),U(" Showing ",(e.currentPage()-1)*e.pageSize+1," to ",e.Math.min(e.currentPage()*e.pageSize,e.totalRecords())," of ",e.totalRecords()," entries "),l(2),k("disabled",e.currentPage()===1),l(),m("disabled",e.currentPage()===1),l(2),b(e.getVisiblePages()),l(2),k("disabled",e.currentPage()===e.totalPages()),l(),m("disabled",e.currentPage()===e.totalPages())}}var $e=(()=>{class n{Math=Math;route=v(X);claimsStore=v(se);claimsApi=v(oe);wsService=v(ce);destroy$=new N;claims=C(()=>this.claimsStore.paginatedClaims());totalRecords=C(()=>this.claimsStore.totalCount());loading=C(()=>this.claimsStore.loading());error=C(()=>this.claimsStore.error());currentPage=A(1);_selectedClaimIds=A([]);selectedClaimIds=this._selectedClaimIds.asReadonly();allSelected=C(()=>this.claims().length>0&&this._selectedClaimIds().length===this.claims().length);pageSize=20;totalPages=C(()=>Math.ceil(this.totalRecords()/this.pageSize));searchTerm="";selectedStatus=null;selectedType=null;statusOptions=Object.values(h).map(e=>({label:B(e),value:e}));typeOptions=Object.values(re).map(e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e}));getStatusLabel=B;ngOnInit(){let e=this.route.snapshot.queryParams.status;e&&(this.selectedStatus=e,this.claimsStore.setFilters({status:e})),this.wsService.connect(),this.wsService.getClaimUpdates().pipe(D(this.destroy$)).subscribe(r=>{r.forEach(a=>{this.claimsStore.handleClaimUpdate(z(W({},a),{status:a.status}))})}),this.loadClaims()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadClaims(){this.claimsStore.setLoading(!0);let e={page:this.currentPage(),size:this.pageSize,status:this.selectedStatus||void 0,claimType:this.selectedType||void 0,search:this.searchTerm||void 0};this.claimsApi.getClaims(e).pipe(D(this.destroy$)).subscribe({next:r=>{this.claimsStore.setClaims(r.items),this.claimsStore.setCurrentPage(r.page),this.claimsStore.setPageSize(r.size),this.claimsStore.setLoading(!1),this.claimsStore.setError(null)},error:r=>{this.claimsStore.setError(r.message||"Failed to load claims"),this.claimsStore.setLoading(!1)}})}onSearch(){this.currentPage.set(1),this.claimsStore.setFilters({searchTerm:this.searchTerm}),this.loadClaims()}onFilterChange(){this.currentPage.set(1),this.claimsStore.setFilters({status:this.selectedStatus||void 0,claimType:this.selectedType||void 0}),this.loadClaims()}goToPage(e){e<1||e>this.totalPages()||(this.currentPage.set(e),this.loadClaims())}getVisiblePages(){let e=this.totalPages(),r=this.currentPage(),a=[],c=Math.max(1,r-2),d=Math.min(e,r+2);d-c<4&&(c===1?d=Math.min(e,5):c=Math.max(1,e-4));for(let O=c;O<=d;O++)a.push(O);return a}refresh(){this.loadClaims()}toggleClaimSelection(e){this._selectedClaimIds.update(r=>r.includes(e)?r.filter(a=>a!==e):[...r,e])}toggleSelectAll(){this.allSelected()?this._selectedClaimIds.set([]):this._selectedClaimIds.set(this.claims().map(e=>e.id))}isSelected(e){return this._selectedClaimIds().includes(e)}getStatusBadgeClass(e){return{[h.DRAFT]:"badge badge-light-secondary",[h.SUBMITTED]:"badge badge-light-info",[h.APPROVED]:"badge badge-light-success",[h.DENIED]:"badge badge-light-danger",[h.PAID]:"badge badge-light-primary",[h.NEEDS_REVIEW]:"badge badge-light-warning"}[e]||"badge badge-light"}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$({type:n,selectors:[["app-modern-claims-list"]],decls:61,vars:9,consts:[[1,"card","card-flush"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","placeholder","Search claims...",1,"form-control","form-control-solid","w-250px","ps-13",3,"ngModelChange","input","ngModel"],[1,"card-toolbar"],[1,"d-flex","gap-3","align-items-center"],[1,"w-150px"],[1,"form-select","form-select-solid",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["type","button",1,"btn","btn-light-primary",3,"click"],[1,"ki-duotone","ki-arrows-circle","fs-2"],["routerLink","new",1,"btn","btn-primary"],[1,"ki-duotone","ki-plus","fs-2"],[1,"card-body","pt-0"],[1,"alert","alert-danger","d-flex","align-items-center","p-5","mb-5"],[1,"table-responsive"],[1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-muted","fw-bold","fs-7","text-uppercase","gs-0"],[1,"w-25px","pe-2"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"min-w-125px"],[1,"text-end","min-w-100px"],[1,"text-gray-600","fw-semibold"],[1,"d-flex","flex-stack","flex-wrap","pt-10"],[1,"ki-duotone","ki-shield-cross","fs-2hx","text-danger","me-4"],[1,"d-flex","flex-column"],[1,"mb-1","text-danger"],["type","button",1,"btn","btn-danger","btn-sm","ms-auto",3,"click"],["colspan","10"],[1,"placeholder-glow"],[1,"placeholder","col-12"],[3,"table-active"],[1,"text-gray-900","fw-bold","text-hover-primary","fs-6",3,"routerLink"],[1,"badge","badge-light-dark"],[1,"text-end"],[1,"d-flex","justify-content-end","gap-1"],["title","View",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"routerLink"],[1,"ki-duotone","ki-eye","fs-5"],[1,"path3"],["title","Review",1,"btn","btn-icon","btn-bg-light","btn-active-color-success","btn-sm",3,"routerLink"],[1,"ki-duotone","ki-check-square","fs-5"],["colspan","10",1,"text-center","py-10"],[1,"d-flex","flex-column","align-items-center"],[1,"ki-duotone","ki-document","fs-3x","text-gray-300","mb-3"],[1,"text-muted","fs-6"],[1,"fs-6","fw-semibold","text-gray-700"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"ki-duotone","ki-left","fs-5"],[1,"page-item",3,"active"],[1,"ki-duotone","ki-right","fs-5"],[1,"page-link",3,"click"]],template:function(r,a){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),u(5,"span",5)(6,"span",6),t(),i(7,"input",7),I("ngModelChange",function(d){return L(a.searchTerm,d)||(a.searchTerm=d),d}),g("input",function(){return a.onSearch()}),t()()(),i(8,"div",8)(9,"div",9)(10,"div",10)(11,"select",11),I("ngModelChange",function(d){return L(a.selectedStatus,d)||(a.selectedStatus=d),d}),g("change",function(){return a.onFilterChange()}),i(12,"option",12),o(13,"All Status"),t(),x(14,_e,2,2,"option",12,me),t()(),i(16,"div",10)(17,"select",11),I("ngModelChange",function(d){return L(a.selectedType,d)||(a.selectedType=d),d}),g("change",function(){return a.onFilterChange()}),i(18,"option",12),o(19,"All Types"),t(),x(20,he,2,2,"option",12,me),t()(),i(22,"button",13),g("click",function(){return a.refresh()}),i(23,"i",14),u(24,"span",5)(25,"span",6),t(),o(26," Refresh "),t(),i(27,"a",15),u(28,"i",16),o(29," New Claim "),t()()()(),i(30,"div",17),y(31,Ce,11,1,"div",18),i(32,"div",19)(33,"table",20)(34,"thead")(35,"tr",21)(36,"th",22)(37,"div",23)(38,"input",24),g("change",function(){return a.toggleSelectAll()}),t()()(),i(39,"th",25),o(40,"Tracking #"),t(),i(41,"th",25),o(42,"Status"),t(),i(43,"th",25),o(44,"Type"),t(),i(45,"th",25),o(46,"Member"),t(),i(47,"th",25),o(48,"Provider"),t(),i(49,"th",25),o(50,"Service Date"),t(),i(51,"th",26),o(52,"Charged"),t(),i(53,"th",26),o(54,"Paid"),t(),i(55,"th",26),o(56,"Actions"),t()()(),i(57,"tbody",27),y(58,Se,2,1)(59,ye,3,1),t()()(),y(60,Me,12,9,"div",28),t()()),r&2&&(l(7),w("ngModel",a.searchTerm),l(4),w("ngModel",a.selectedStatus),l(),m("ngValue",null),l(2),b(a.statusOptions),l(3),w("ngModel",a.selectedType),l(),m("ngValue",null),l(2),b(a.typeOptions),l(11),M(a.error()?31:-1),l(7),m("checked",a.allSelected()),l(20),M(a.loading()?58:59),l(2),M(a.totalRecords()>a.pageSize?60:-1))},dependencies:[Q,H,K,J,Y,le,ne,ae,Z,ie,ee,te],styles:["[_nghost-%COMP%]{display:block}.table-active[_ngcontent-%COMP%]{background-color:#009ef70d!important}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#009ef7;border-color:#009ef7}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{cursor:pointer}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{cursor:not-allowed}"],changeDetection:0})}return n})();export{$e as ModernClaimsListComponent};
