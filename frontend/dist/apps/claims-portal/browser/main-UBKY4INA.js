import{a as Re,b as Oe}from"./chunk-5QRQSYU5.js";import{a as c}from"./chunk-ZBXPEZGW.js";import{a as Me}from"./chunk-RE5X3647.js";import{a as _e,b as Ee}from"./chunk-VBPYTXU6.js";import{a as xe,b as De}from"./chunk-C73BGL6H.js";import{a as ke,b as Pe}from"./chunk-OUDOF7NV.js";import"./chunk-ZURLY7IA.js";import"./chunk-E5KJRRTP.js";import"./chunk-XKZBSERL.js";import"./chunk-ZCMJ7UQL.js";import"./chunk-GGQ7LRWG.js";import{d as Ce,f as Ae}from"./chunk-QJZJPKUU.js";import"./chunk-2UYTTCDL.js";import"./chunk-SILQIBBA.js";import{e as we,i as A,n as Se}from"./chunk-CMI2WP65.js";import"./chunk-F2X3VGZZ.js";import{a as p}from"./chunk-QB55GBCV.js";import{c as ye,d as v,g as ve,h as Te,i as be,j as Ie}from"./chunk-TD2OOY6M.js";import{a as me,b as pe,e as ue,f as he,g as ge,h as fe}from"./chunk-R72WXHZK.js";import{a as de,u as C}from"./chunk-2QNP6Q64.js";import{A as z,Bb as d,Bc as ce,Cb as l,D as V,Da as Q,Db as y,G as $,Ga as q,Hb as ne,Kb as x,Lb as D,T as B,Tb as u,Ub as se,V as H,X as G,Xa as T,Z as m,_a as ee,aa as Z,ac as ae,bb as te,da as n,ea as Y,fb as f,g as N,ka as _,kb as re,la as E,m as L,n as j,nb as ie,pa as X,qc as le,ra as J,s as U,sb as b,ua as K,vb as oe,x as g,y as W,ya as S}from"./chunk-UUFN4DK2.js";import{a as O,b as F}from"./chunk-4CLCTAJ7.js";var Ze="@",Ye=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=n(X);loadingSchedulerFn=n(Xe,{optional:!0});_engine;constructor(e,r,o,s,a){this.doc=e,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-RQMND6HD.js").then(o=>o),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(e):r=e(),r.catch(o=>{throw new G(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:s})=>{this._engine=o(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,r){let o=this.delegate.createRenderer(e,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new k(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let w=a.createRenderer(e,r);s.use(w),this.scheduler??=this.injector.get(J,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(r){te()};static \u0275prov=m({token:t,factory:t.\u0275fac})}return t})(),k=class{delegate;replay=[];\u0275type=1;constructor(i){this.delegate=i}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,r,o){this.delegate.insertBefore(i,e,r,o)}removeChild(i,e,r){this.delegate.removeChild(i,e,r)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,r,o){this.delegate.setAttribute(i,e,r,o)}removeAttribute(i,e,r){this.delegate.removeAttribute(i,e,r)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,r,o){this.delegate.setStyle(i,e,r,o)}removeStyle(i,e,r){this.delegate.removeStyle(i,e,r)}setProperty(i,e,r){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(i,e,r)),this.delegate.setProperty(i,e,r)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,r,o){return this.shouldReplay(e)&&this.replay.push(s=>s.listen(i,e,r,o)),this.delegate.listen(i,e,r,o)}shouldReplay(i){return this.replay!==null&&i.startsWith(Ze)}},Xe=new Z("");function Fe(t="animations"){return q("NgAsyncAnimations"),Y([{provide:ee,useFactory:(i,e,r)=>new Ye(i,e,r,t),deps:[de,me,K]},{provide:Q,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var P=(t,i)=>{let e=n(c),r=n(v);if(e.isAuthenticated())return!0;let o=i.url;return r.createUrlTree(["/auth/login"],{queryParams:{returnUrl:o}})};var Ne=[{path:"",redirectTo:"auth/login",pathMatch:"full"},{path:"auth",loadChildren:()=>import("./chunk-EXQLXJTR.js").then(t=>t.AUTH_ROUTES)},{path:"modern",loadChildren:()=>import("./chunk-4RULSNZ7.js").then(t=>t.MODERN_ROUTES),canActivate:[P],data:{preload:!0,preloadDelay:500}},{path:"classic",loadComponent:()=>import("./chunk-RXY2HGYZ.js").then(t=>t.ClassicLayoutComponent),canActivate:[P],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadChildren:()=>import("./chunk-WOLFEG4G.js").then(t=>t.DASHBOARD_ROUTES)},{path:"claims",loadChildren:()=>import("./chunk-EDYPBZID.js").then(t=>t.CLAIMS_ROUTES),data:{preload:!0,preloadDelay:1500}},{path:"eligibility",loadChildren:()=>import("./chunk-AZFF5GP6.js").then(t=>t.ELIGIBILITY_ROUTES),data:{preload:!0,preloadDelay:2e3}},{path:"admin",loadChildren:()=>import("./chunk-CIEGJM7X.js").then(t=>t.ADMIN_ROUTES)},{path:"reports",loadChildren:()=>import("./chunk-IYP2F4MI.js").then(t=>t.REPORTS_ROUTES)},{path:"help",loadChildren:()=>import("./chunk-MKGYHDH7.js").then(t=>t.HELP_ROUTES)}]},{path:"dashboard",redirectTo:"classic/dashboard",pathMatch:"full"},{path:"claims",redirectTo:"classic/claims",pathMatch:"prefix"},{path:"eligibility",redirectTo:"classic/eligibility",pathMatch:"prefix"},{path:"admin",redirectTo:"classic/admin",pathMatch:"prefix"},{path:"reports",redirectTo:"classic/reports",pathMatch:"prefix"},{path:"help",redirectTo:"classic/help",pathMatch:"prefix"},{path:"**",redirectTo:"modern/dashboard"}];function Je(){let t=document.cookie.match(/csrf_token=([^;]+)/);return t?t[1]:null}var Le=(t,i)=>{let e=n(c);if(t.url.includes("/auth/login"))return i(t);let r=Je(),o=t.headers.set("X-Request-ID",crypto.randomUUID());r&&(o=o.set("X-CSRF-Token",r));let s=t.clone({withCredentials:!0,headers:o});return e.recordActivity(),i(s)};var je=(()=>{class t{levels={debug:0,info:1,warn:2,error:3};currentLevel;constructor(){this.currentLevel=this.levels[p.logLevel]??0}debug(e,r,o){this.log("debug",e,r,o)}info(e,r,o){this.log("info",e,r,o)}warn(e,r,o){this.log("warn",e,r,o)}error(e,r,o){this.log("error",e,r,o)}log(e,r,o,s){if(this.levels[e]<this.currentLevel)return;let a={level:e,message:r,timestamp:new Date().toISOString(),context:o,data:s};if(p.production)console[e](JSON.stringify(a));else{let w=o?`[${o}]`:"",R=e==="debug"?"log":e;s?console[R](`${w} ${r}`,s):console[R](`${w} ${r}`)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ue=(t,i)=>{let e=n(v),r=n(A),o=n(je);return i(t).pipe(V(s=>{let a="An unexpected error occurred. Please try again.";switch(s.status){case 0:a="Unable to connect to server. Please check your connection.",o.error("Network error","ErrorInterceptor",{url:t.url});break;case 400:a=Ke(s);break;case 401:a="Your session has expired. Please log in again.",e.navigate(["/auth/login"]);break;case 403:a="You do not have permission to perform this action.",o.warn("Access denied","ErrorInterceptor",{url:t.url});break;case 404:a="The requested resource was not found.";break;case 422:a=Qe(s);break;case 429:a="Too many requests. Please wait a moment and try again.";break;case 500:case 502:case 503:case 504:a="A server error occurred. Please try again later.",o.error("Server error","ErrorInterceptor",{url:t.url,status:s.status});break;default:o.error("Unexpected error","ErrorInterceptor",{url:t.url,status:s.status,message:s.message})}return r.add({severity:"error",summary:"Error",detail:a,life:5e3}),j(()=>({status:s.status,message:a,original:s}))}))};function Ke(t){let i=t.error;return i?.detail?typeof i.detail=="string"?I(i.detail):I(i.detail.message):"Invalid request. Please check your input."}function Qe(t){let i=t.error;if(!i?.detail)return"Validation failed. Please check your input.";if(typeof i.detail=="string")return I(i.detail);if(i.detail.errors&&i.detail.errors.length>0){let e=i.detail.errors[0];return`${e.field}: ${I(e.message)}`}return I(i.detail.message)}function I(t){return t.replace(/\b\d{3}-\d{2}-\d{4}\b/g,"[REDACTED]").replace(/\b\d{9}\b/g,"[REDACTED]").replace(/MEM-[A-Z0-9]+/gi,"[MEMBER]").replace(/CLM-[A-Z0-9]+/gi,"[CLAIM]").replace(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,"[EMAIL]")}var We=(()=>{class t{http=n(ue);authService=n(c);buffer=[];bufferSize=10;flushTimer=null;phiPatterns=[/\/claims/,/\/members/,/\/eligibility/,/\/providers/,/\/policies/,/\/documents/];isPHIAccess(e){return this.phiPatterns.some(r=>r.test(e))}log(e){if(!p.enableAuditLogging)return;let r=this.authService.user(),o=F(O({},e),{userId:r?.id,username:r?.username,role:r?.role,timestamp:new Date().toISOString()});this.buffer.push(o),this.buffer.length>=this.bufferSize?this.flush():this.scheduleFlush()}logHttpAccess(e,r,o){if(!this.isPHIAccess(r))return;let s=this.methodToAction(e),a=this.extractResource(r);this.log({action:s,resource:a,resourceId:o,method:e,url:r})}flush(){if(this.buffer.length===0)return;let e=[...this.buffer];this.buffer.length=0,this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.http.post(`${p.apiUrl}/audit/batch`,{entries:e},{withCredentials:!0}).subscribe({error:r=>{console.error("Failed to flush audit logs:",r),this.buffer.push(...e)}})}scheduleFlush(){this.flushTimer||(this.flushTimer=setTimeout(()=>{this.flush()},5e3))}methodToAction(e){switch(e.toUpperCase()){case"GET":return"view";case"POST":return"create";case"PUT":case"PATCH":return"update";case"DELETE":return"delete";default:return"view"}}extractResource(e){let r=e.match(/\/api\/v1\/(\w+)/);return r?r[1]:"unknown"}static \u0275fac=function(r){return new(r||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qe(t){let i=t.match(/\/[a-z]+\/([a-zA-Z0-9-]+)(?:\/|$|\?)/);return i?i[1]:void 0}var ze=(t,i)=>{let e=n(We);if(!e.isPHIAccess(t.url))return i(t);let r=qe(t.url);return i(t).pipe(H({next:()=>{e.logHttpAccess(t.method,t.url,r)},error:()=>{e.logHttpAccess(t.method,t.url,r)}}))};var Ve=(()=>{class t{preload(e,r){if(e.data?.preload){let o=e.data?.preloadDelay||2e3;return W(o).pipe(U(()=>r()))}return L(null)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function et(){let t=n(c);return()=>new Promise(i=>{try{t.initializeAuth()}catch(e){console.error("Auth initialization failed:",e)}i()})}var $e={providers:[le({eventCoalescing:!0}),{provide:ie,useFactory:et,multi:!0},ve(Ne,be(),Ie(),Te(Ve)),he(fe(),ge([Le,ze,Ue])),Fe(),A,we]};var M=(()=>{class t{router=n(v);authService=n(c);destroy$=new N;IDLE_TIMEOUT=p.production?p.security?.maxIdleTime||10*60*1e3:30*60*1e3;WARNING_TIME=60*1e3;isIdle=S(!1);showWarning=S(!1);remainingTime=S(0);idleTimer=null;warningTimer=null;countdownInterval=null;startMonitoring(){z(g(document,"mousemove"),g(document,"mousedown"),g(document,"keypress"),g(document,"touchstart"),g(document,"scroll")).pipe($(500),B(this.destroy$)).subscribe(()=>{this.resetTimer()}),this.resetTimer()}stopMonitoring(){this.clearTimers(),this.isIdle.set(!1),this.showWarning.set(!1)}resetTimer(){this.clearTimers(),this.isIdle.set(!1),this.showWarning.set(!1),this.warningTimer=setTimeout(()=>{this.showIdleWarning()},this.IDLE_TIMEOUT-this.WARNING_TIME),this.idleTimer=setTimeout(()=>{this.handleIdleTimeout()},this.IDLE_TIMEOUT)}showIdleWarning(){this.showWarning.set(!0),this.remainingTime.set(this.WARNING_TIME/1e3),this.countdownInterval=setInterval(()=>{let e=this.remainingTime();e>0&&this.remainingTime.set(e-1)},1e3)}handleIdleTimeout(){this.isIdle.set(!0),this.showWarning.set(!1),this.clearTimers(),console.warn("Session timed out due to inactivity"),this.authService.logout().subscribe({complete:()=>{this.router.navigate(["/auth/login"],{queryParams:{reason:"timeout"}})}})}extendSession(){this.resetTimer()}clearTimers(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.warningTimer&&(clearTimeout(this.warningTimer),this.warningTimer=null),this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearTimers()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Be=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=f({type:t,selectors:[["app-skip-link"]],decls:2,vars:0,consts:[["href","#main-content",1,"skip-link"]],template:function(r,o){r&1&&(d(0,"a",0),u(1," Skip to main content "),l())},styles:[".skip-link[_ngcontent-%COMP%]{position:absolute;top:-100px;left:0;background:#06c;color:#fff;padding:.75rem 1.5rem;z-index:10000;font-weight:600;text-decoration:none;border-radius:0 0 4px;transition:top .2s ease}.skip-link[_ngcontent-%COMP%]:focus{top:0;outline:3px solid #FFC107;outline-offset:2px}"],changeDetection:0})}return t})();var tt=()=>({width:"400px"});function rt(t,i){if(t&1){let e=ne();d(0,"button",8),x("click",function(){_(e);let o=D();return E(o.extendSession())}),l(),d(1,"button",9),x("click",function(){_(e);let o=D();return E(o.logout())}),l()}}var He=(()=>{class t{idleService=n(M);WARNING_TOTAL=60;getProgressValue(){return(this.WARNING_TOTAL-this.idleService.remainingTime())/this.WARNING_TOTAL*100}extendSession(){this.idleService.extendSession()}logout(){window.location.href="/auth/login?reason=manual"}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=f({type:t,selectors:[["app-idle-warning-dialog"]],decls:13,vars:11,consts:[["header","Session Timeout Warning","styleClass","idle-warning-dialog",3,"visible","modal","closable","draggable","resizable"],[1,"warning-content"],[1,"warning-icon"],[1,"pi","pi-exclamation-triangle"],[1,"warning-message"],[1,"warning-countdown"],["styleClass","countdown-bar",3,"value","showValue"],["pTemplate","footer"],["pButton","","label","Stay Logged In","icon","pi pi-refresh","autofocus","",1,"p-button-lg",3,"click"],["pButton","","label","Log Out Now","icon","pi pi-sign-out",1,"p-button-outlined","p-button-secondary",3,"click"]],template:function(r,o){r&1&&(d(0,"p-dialog",0)(1,"div",1)(2,"div",2),y(3,"i",3),l(),d(4,"p",4),u(5," Your session is about to expire due to inactivity. "),l(),d(6,"p",5),u(7," You will be logged out in "),d(8,"strong"),u(9),l(),u(10," seconds. "),l(),y(11,"p-progressBar",6),l(),re(12,rt,2,0,"ng-template",7),l()),r&2&&(oe(ae(10,tt)),b("visible",o.idleService.showWarning())("modal",!0)("closable",!1)("draggable",!1)("resizable",!1),T(9),se(o.idleService.remainingTime()),T(2),b("value",o.getProgressValue())("showValue",!1))},dependencies:[C,Oe,Re,Se,Ae,Ce,Pe,ke],styles:[".warning-content[_ngcontent-%COMP%]{text-align:center;padding:1rem}.warning-icon[_ngcontent-%COMP%]{font-size:3rem;color:#f59e0b;margin-bottom:1rem}.warning-message[_ngcontent-%COMP%]{font-size:1.1rem;color:#374151;margin-bottom:.5rem}.warning-countdown[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;margin-bottom:1rem}.warning-countdown[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#dc3545;font-size:1.25rem}[_nghost-%COMP%]     .countdown-bar .p-progressbar{height:6px;background:#e5e7eb}[_nghost-%COMP%]     .countdown-bar .p-progressbar-value{background:linear-gradient(90deg,#f59e0b,#dc3545)}[_nghost-%COMP%]     .idle-warning-dialog .p-dialog-footer{display:flex;justify-content:center;gap:1rem}"],changeDetection:0})}return t})();var Ge=(()=>{class t{authService=n(c);wsService=n(Me);idleService=n(M);constructor(){ce(()=>{this.authService.isLoggedIn()?(this.wsService.connect(),this.idleService.startMonitoring()):(this.wsService.disconnect(),this.idleService.stopMonitoring())})}ngOnInit(){}ngOnDestroy(){this.wsService.disconnect(),this.idleService.stopMonitoring()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],decls:6,vars:1,consts:[["position","top-right",3,"life"],["id","main-content","role","main","tabindex","-1"]],template:function(r,o){r&1&&(y(0,"app-skip-link")(1,"p-toast",0)(2,"p-confirmDialog")(3,"app-idle-warning-dialog"),d(4,"main",1),y(5,"router-outlet"),l()),r&2&&(T(),b("life",5e3))},dependencies:[C,ye,De,xe,Ee,_e,Be,He],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}main[_ngcontent-%COMP%]:focus{outline:none}"],changeDetection:0})}return t})();pe(Ge,$e).catch(t=>console.error("Application bootstrap failed:",t));
